[`ðŸ  HOME`](../../README.md)  

[`ðŸ“˜ RabbitMQ THEORY`](./README.md) 

# ÐÐ°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð· RabbitMQ - "Hello World!"

## Ð’ÑÑ‚ÑƒÐ¿

> [!NOTE]  
> **ÐŸÐ¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸**  
>
> Ð¦ÐµÐ¹ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð¿ÐµÑ€ÐµÐ´Ð±Ð°Ñ‡Ð°Ñ”, Ñ‰Ð¾ RabbitMQ Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ– Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð½Ð° `localhost` Ð·Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¸Ð¼ Ð¿Ð¾Ñ€Ñ‚Ð¾Ð¼ (5672). Ð£ Ñ€Ð°Ð·Ñ– Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ Ñ–Ð½ÑˆÐ¾Ð³Ð¾ Ñ…Ð¾ÑÑ‚Ñƒ, Ð¿Ð¾Ñ€Ñ‚Ñƒ Ð°Ð±Ð¾ Ð¾Ð±Ð»Ñ–ÐºÐ¾Ð²Ð¸Ñ… Ð´Ð°Ð½Ð¸Ñ…, Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð±ÑƒÐ´Ðµ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ.

RabbitMQ - Ñ†Ðµ Ð¿Ð¾ÑÐµÑ€ÐµÐ´Ð½Ð¸Ðº Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ: Ð²Ñ–Ð½ Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ” Ñ‚Ð° Ð¿ÐµÑ€ÐµÑÐ¸Ð»Ð°Ñ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ. Ð’Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ ÑƒÑÐ²Ð¸Ñ‚Ð¸ Ð¹Ð¾Ð³Ð¾ ÑÐº Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ðµ Ð²Ñ–Ð´Ð´Ñ–Ð»ÐµÐ½Ð½Ñ: ÐºÐ¾Ð»Ð¸ Ð²Ð¸ ÐºÐ»Ð°Ð´ÐµÑ‚Ðµ Ð»Ð¸ÑÑ‚ Ñƒ Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ñƒ ÑÐºÑ€Ð¸Ð½ÑŒÐºÑƒ, Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð±ÑƒÑ‚Ð¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–, Ñ‰Ð¾ Ð¿Ð¾ÑˆÑ‚Ð°Ñ€ Ñ€Ð°Ð½Ð¾ Ñ‡Ð¸ Ð¿Ñ–Ð·Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð»Ð¸ÑÑ‚Ð° Ð²Ð°ÑˆÐ¾Ð¼Ñƒ Ð¾Ð´ÐµÑ€Ð¶ÑƒÐ²Ð°Ñ‡ÐµÐ²Ñ–. Ð£ Ñ†Ñ–Ð¹ Ð°Ð½Ð°Ð»Ð¾Ð³Ñ–Ñ— RabbitMQ - Ñ†Ðµ Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ð° ÑÐºÑ€Ð¸Ð½ÑŒÐºÐ°, Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ðµ Ð²Ñ–Ð´Ð´Ñ–Ð»ÐµÐ½Ð½Ñ Ñ‚Ð° Ð¿Ð¾ÑˆÑ‚Ð°Ñ€.

ÐžÑÐ½Ð¾Ð²Ð½Ð° Ñ€Ñ–Ð·Ð½Ð¸Ñ†Ñ Ð¼Ñ–Ð¶ RabbitMQ Ñ‚Ð° Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ð¸Ð¼ Ð²Ñ–Ð´Ð´Ñ–Ð»ÐµÐ½Ð½ÑÐ¼ Ð¿Ð¾Ð»ÑÐ³Ð°Ñ” Ð² Ñ‚Ð¾Ð¼Ñƒ, Ñ‰Ð¾ RabbitMQ Ð½Ðµ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð· Ð¿Ð°Ð¿ÐµÑ€Ð¾Ð²Ð¸Ð¼Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸, Ð·Ð°Ð¼Ñ–ÑÑ‚ÑŒ Ñ†ÑŒÐ¾Ð³Ð¾ Ð²Ñ–Ð½ Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ”, Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ” Ñ‚Ð° Ð¿ÐµÑ€ÐµÑÐ¸Ð»Ð°Ñ” Ð±Ñ–Ð½Ð°Ñ€Ð½Ñ– Ð±Ð»Ð¾Ð±Ð¸ Ð´Ð°Ð½Ð¸Ñ… - *Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ*.

RabbitMQ, Ñ‚Ð°Ðº ÑÐ°Ð¼Ð¾ ÑÐº Ñ– Ð²Ð·Ð°Ð³Ð°Ð»Ñ– Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ, Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ” Ð¿ÐµÐ²Ð½Ð¸Ð¹ Ð¶Ð°Ñ€Ð³Ð¾Ð½.

â€¢ ***ÐŸÑ€Ð¾Ð´ÑƒÐºÑƒÐ²Ð°Ð½Ð½Ñ*** (Producing) Ð¾Ð·Ð½Ð°Ñ‡Ð°Ñ” Ð½Ðµ Ñ‰Ð¾ Ñ–Ð½ÑˆÐµ, ÑÐº Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ñ. ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð°, ÑÐºÐ° Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, - Ñ†Ðµ ***Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€***.

```mermaid
flowchart LR;
    P((P))
    
    style P fill:#0094FF, stroke:#FFFFFF,stroke-width:2px
    
    P
```

â€¢ ***Ð§ÐµÑ€Ð³Ð°*** - Ñ†Ðµ Ð½Ð°Ð·Ð²Ð° Ð´Ð»Ñ Ð¿Ð¾ÑˆÑ‚Ð¾Ð²Ð¾Ñ— ÑÐºÑ€Ð¸Ð½ÑŒÐºÐ¸ Ð² RabbitMQ. Ð¥Ð¾Ñ‡Ð° Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· RabbitMQ Ñ‚Ð° Ð²Ð°ÑˆÑ– Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸, Ð²Ð¾Ð½Ð¸ Ð¼Ð¾Ð¶ÑƒÑ‚ÑŒ Ð±ÑƒÑ‚Ð¸ Ð·Ð±ÐµÑ€ÐµÐ¶ÐµÐ½Ñ– Ð»Ð¸ÑˆÐµ Ð²ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– ***Ñ‡ÐµÑ€Ð³Ð¸***. ***Ð§ÐµÑ€Ð³Ð°*** Ð¾Ð±Ð¼ÐµÐ¶ÑƒÑ”Ñ‚ÑŒÑÑ Ð»Ð¸ÑˆÐµ Ð¾Ð±ÑÑÐ³Ð°Ð¼Ð¸ Ð¿Ð°Ð¼'ÑÑ‚Ñ– Ñ‚Ð° Ð´Ð¸ÑÐºÐ° Ñ…Ð¾ÑÑ‚Ð°, Ñ–, Ð¿Ð¾ ÑÑƒÑ‚Ñ–, Ñ†Ðµ Ð²ÐµÐ»Ð¸ÐºÐ¸Ð¹ Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ.

Ð‘Ð°Ð³Ð°Ñ‚Ð¾ ***Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ñ–Ð²*** Ð¼Ð¾Ð¶ÑƒÑ‚ÑŒ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÑÐºÑ– Ð¹Ð´ÑƒÑ‚ÑŒ Ð² Ð¾Ð´Ð½Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ, Ñ– Ð±Ð°Ð³Ð°Ñ‚Ð¾ ***ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñ–Ð²*** Ð¼Ð¾Ð¶ÑƒÑ‚ÑŒ Ð½Ð°Ð¼Ð°Ð³Ð°Ñ‚Ð¸ÑÑ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸ Ð´Ð°Ð½Ñ– Ð· Ð¾Ð´Ð½Ñ–Ñ”Ñ— Ñ‡ÐµÑ€Ð³Ð¸.

ÐžÑÑŒ ÑÐº Ð¼Ð¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ Ñ‡ÐµÑ€Ð³Ñƒ:

```mermaid
flowchart LR;
    Q[[Queue_name]]

    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px

    Q
```

â€¢ ***Ð¡Ð¿Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð½Ñ*** Ð¼Ð°Ñ” ÑÑ…Ð¾Ð¶Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ð· Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½ÑÐ¼. ***Ð¡Ð¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡*** - Ñ†Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð°, ÑÐºÐ° Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼Ñƒ Ð¾Ñ‡Ñ–ÐºÑƒÑ” Ð½Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ.

```mermaid
flowchart LR;
    C((C))

    style C fill:#00FF21, stroke:#FFFFFF,stroke-width:2px

    C
```

Ð—Ð²ÐµÑ€Ð½Ñ–Ñ‚ÑŒ ÑƒÐ²Ð°Ð³Ñƒ, Ñ‰Ð¾ Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸Ðº, ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ñ– Ð¿Ð¾ÑÐµÑ€ÐµÐ´Ð½Ð¸Ðº Ð½Ðµ Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ð¾ Ð¿Ð¾Ð²Ð¸Ð½Ð½Ñ– Ð·Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚Ð¸ÑÑ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼Ñƒ Ñ…Ð¾ÑÑ‚Ñ–; Ð½Ð°ÑÐ¿Ñ€Ð°Ð²Ð´Ñ–, Ð² Ð±Ñ–Ð»ÑŒÑˆÐ¾ÑÑ‚Ñ– Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ Ð²Ð¾Ð½Ð¸ Ñ†ÑŒÐ¾Ð³Ð¾ Ð½Ðµ Ñ€Ð¾Ð±Ð»ÑÑ‚ÑŒ. Ð Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº Ð¼Ð¾Ð¶Ðµ Ð±ÑƒÑ‚Ð¸ Ð¾Ð±Ð¾Ð¼Ð° ÑÐº Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð¾Ð¼ Ñ‚Ð°Ðº Ñ– ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ÐµÐ¼.

## "Hello World"

Ð£ Ñ†Ñ–Ð¹ Ñ‡Ð°ÑÑ‚Ð¸Ð½Ñ– Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÐ° Ð¼Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐµÐ¼Ð¾ Ð´Ð²Ñ– Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸ Ð½Ð° C#: Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð°, ÑÐºÐ¸Ð¹ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ” Ð¾Ð´Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ñ– ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°, ÑÐºÐ¸Ð¹ Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ– Ð²Ð¸Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ—Ñ…. ÐœÐ¸ Ð¾Ð±Ñ–Ð¹Ð´ÐµÐ¼Ð¾ Ð´ÐµÑÐºÑ– Ð´ÐµÑ‚Ð°Ð»Ñ– Ñƒ .NET-ÐºÐ»Ñ–Ñ”Ð½Ñ‚ÑÑŒÐºÐ¾Ð¼Ñƒ API, Ð·Ð¾ÑÐµÑ€ÐµÐ´Ð¶ÑƒÑŽÑ‡Ð¸ÑÑŒ Ð½Ð° Ñ†Ñ–Ð¹ Ð´ÑƒÐ¶Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ñ–Ð¹ Ñ€ÐµÑ‡Ñ–, Ñ‰Ð¾Ð± Ð¿Ñ€Ð¸ÑÑ‚ÑƒÐ¿Ð¸Ñ‚Ð¸ Ð´Ð¾ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸. Ð¦Ðµ "Hello World" Ñƒ ÑÐ²Ñ–Ñ‚Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ.

ÐÐ° Ð´Ñ–Ð°Ð³Ñ€Ð°Ð¼Ñ– Ð½Ð¸Ð¶Ñ‡Ðµ "P" - Ñ†Ðµ Ð½Ð°Ñˆ Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€, Ð° "C" - Ð½Ð°Ñˆ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡. ÐšÐ²Ð°Ð´Ñ€Ð°Ñ‚ Ñƒ ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– - Ñ†Ðµ Ñ‡ÐµÑ€Ð³Ð° - Ð±ÑƒÑ„ÐµÑ€ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ, ÑÐºÐ¸Ð¹ RabbitMQ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ” Ð²Ñ–Ð´ Ñ–Ð¼ÐµÐ½Ñ– ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C((C))

    style P fill:#007ACC, stroke:#FFFFFF,stroke-width:2px
    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px
    style C fill:#009E0A, stroke:#FFFFFF,stroke-width:2px

    P-->Q-->C
```

> **The .NET client library**
>
> RabbitMQ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” ÐºÑ–Ð»ÑŒÐºÐ° Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñ–Ð². Ð£ Ñ†ÑŒÐ¾Ð¼Ñƒ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÑƒ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ AMQP 0-9-1, ÑÐºÐ¸Ð¹ Ñ” Ð²Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸Ð¼, Ð·Ð°Ð³Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð¼ Ð´Ð»Ñ Ð¾Ð±Ð¼Ñ–Ð½Ñƒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½ÑÐ¼Ð¸. Ð†ÑÐ½ÑƒÑ” ÐºÑ–Ð»ÑŒÐºÐ° ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ñ–Ð² Ð´Ð»Ñ RabbitMQ Ð½Ð° Ð±Ð°Ð³Ð°Ñ‚ÑŒÐ¾Ñ… Ñ€Ñ–Ð·Ð½Ð¸Ñ… Ð¼Ð¾Ð²Ð°Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ. ÐœÐ¸ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸Ð¼ÐµÐ¼Ð¾ .NET-ÐºÐ»Ñ–Ñ”Ð½Ñ‚, ÑÐºÐ¸Ð¹ Ð½Ð°Ð´Ð°Ñ”Ñ‚ÑŒÑÑ RabbitMQ.
>
> Ð¦ÐµÐ¹ ÐºÐ»Ñ–Ñ”Ð½Ñ‚ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” .NET Core, Ð° Ñ‚Ð°ÐºÐ¾Ð¶ .NET Framework 4.5.1+. Ð£ Ñ†ÑŒÐ¾Ð¼Ñƒ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÑƒ Ð±ÑƒÐ´Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð¾ RabbitMQ .NET-ÐºÐ»Ñ–Ñ”Ð½Ñ‚ Ð²ÐµÑ€ÑÑ–Ñ— 5.0 Ñ‚Ð° .NET Core, Ñ‚Ð¾Ð¼Ñƒ Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ð¹Ñ‚ÐµÑÑ, Ñ‰Ð¾ Ð²Ð¸ Ð¹Ð¾Ð³Ð¾ Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð»Ð¸ Ñ– Ð²ÐºÐ°Ð·Ð°Ð»Ð¸ Ð² ÑÐ²Ñ–Ð¹ ÑˆÐ»ÑÑ….
> 
> Ð’Ð¸ Ñ‚Ð°ÐºÐ¾Ð¶ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ .NET Framework Ð´Ð»Ñ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÐ°, Ð¾Ð´Ð½Ð°Ðº ÐºÑ€Ð¾ÐºÐ¸ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ñ–Ð½ÑˆÐ¸Ð¼Ð¸.
>
> RabbitMQ .NET-ÐºÐ»Ñ–Ñ”Ð½Ñ‚ Ð²ÐµÑ€ÑÑ–Ñ— 5.0 Ñ‚Ð° Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐ¸Ñ… Ð²ÐµÑ€ÑÑ–Ð¹ Ñ€Ð¾Ð·Ð¿Ð¾Ð²ÑÑŽÐ´Ð¶ÑƒÑ”Ñ‚ÑŒÑÑ Ñ‡ÐµÑ€ÐµÐ· NuGet.
> 
> Ð¦ÐµÐ¹ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð¿ÐµÑ€ÐµÐ´Ð±Ð°Ñ‡Ð°Ñ”, Ñ‰Ð¾ Ð²Ð¸ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚Ðµ PowerShell Ð½Ð° Windows. ÐÐ° MacOS Ñ‚Ð° Linux Ð¿Ñ–Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡Ð½Ð¾ Ð±ÑƒÐ´ÑŒ-ÑÐºÐ° Ð¾Ð±Ð¾Ð»Ð¾Ð½ÐºÐ°.

## ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ

Ð¡Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ð¹Ñ‚ÐµÑÑ, Ñ‰Ð¾ Ñƒ Ð²Ð°Ñ Ñ” Ñ–Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð½Ð°Ð±Ñ–Ñ€ .NET Core Ñƒ Ð²Ð°ÑˆÐ¾Ð¼Ñƒ `PATH`.

```powershell
dotnet --help
```

Ð”Ð¾Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ, Ñ‰Ð¾Ð± Ð²Ð¾Ð½Ð° Ð²Ð¸Ð²ÐµÐ»Ð° Ð´Ð¾Ð²Ñ–Ð´ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.

Ð¢ÐµÐ¿ÐµÑ€ Ð·Ð³ÐµÐ½ÐµÑ€ÑƒÐ¹Ñ‚Ðµ Ð´Ð²Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸: Ð¾Ð´Ð¸Ð½ Ð´Ð»Ñ Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ° Ñ‚Ð° Ð¾Ð´Ð¸Ð½ Ð´Ð»Ñ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°.

```powershell
dotnet new console --name Send
mv Send/Program.cs Send/Send.cs
dotnet new console --name Receive
mv Receive/Program.cs Receive/Receive.cs
```

Ð¦Ðµ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð´Ð²Ñ– Ð½Ð¾Ð²Ñ– Ñ‚ÐµÐºÐ¸ Ð· Ð½Ð°Ð·Ð²Ð°Ð¼Ð¸ `Send` Ñ‚Ð° `Receive`.

ÐŸÐ¾Ñ‚Ñ–Ð¼ Ð¼Ð¸ Ð´Ð¾Ð´Ð°Ñ”Ð¼Ð¾ Ð·Ð°Ð»ÐµÐ¶Ð½Ñ–ÑÑ‚ÑŒ Ð²Ñ–Ð´ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð°.

```powershell
cd Send
dotnet add package RabbitMQ.Client
cd ../Receive
dotnet add package RabbitMQ.Client
```

Ð¢ÐµÐ¿ÐµÑ€, ÐºÐ¾Ð»Ð¸ Ñƒ Ð½Ð°Ñ Ð½Ð°Ð»Ð°ÑˆÑ‚Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ .NET, Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚Ð¸ Ð´ÐµÑÐºÐ¸Ð¹ ÐºÐ¾Ð´.

## ÐÐ°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]

    style P fill:#0094FF, stroke:#FFFFFF,stroke-width:2px
    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px

    P-->Q
```

ÐœÐ¸ Ð½Ð°Ð·Ð¸Ð²Ð°Ñ”Ð¼Ð¾ Ð½Ð°Ñˆ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð½Ð¸Ðº Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ (Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸Ðº) `Send.cs`, Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‡ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ (ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡) `Receive.cs`. Ð’Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð½Ð¸Ðº Ð±ÑƒÐ´Ðµ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡Ð°Ñ‚Ð¸ÑÑ Ð´Ð¾ RabbitMQ, Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚Ð¸ Ð¾Ð´Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð° Ð¿Ð¾Ñ‚Ñ–Ð¼ Ð·Ð°Ð²ÐµÑ€ÑˆÑƒÐ²Ð°Ñ‚Ð¸ Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ.

Ð£ Ñ„Ð°Ð¹Ð»Ñ– `Send.cs`(https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Send/Send.cs) Ð½Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ð´ÐµÑÐºÑ– Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ€Ð¸ Ñ–Ð¼ÐµÐ½:

```cs
using System.Text;
using RabbitMQ.Client;
```

ÐŸÐ¾Ñ‚Ñ–Ð¼ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð· ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼:

```cs
var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();
...
```

Ð—'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð°Ð±ÑÑ‚Ñ€Ð°Ð³ÑƒÑ” Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ ÑÐ¾ÐºÐµÑ‚Ñ–Ð² Ñ‚Ð° Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ” Ð·Ð° Ð¿ÐµÑ€ÐµÐ³Ð¾Ð²Ð¾Ñ€Ð¸ Ñ‰Ð¾Ð´Ð¾ Ð²ÐµÑ€ÑÑ–Ñ— Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñƒ, Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–ÑŽ Ñ‚Ð¾Ñ‰Ð¾ Ð·Ð° Ð½Ð°Ñ. Ð¢ÑƒÑ‚ Ð¼Ð¸ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡Ð°Ñ”Ð¼Ð¾ÑÑŒ Ð´Ð¾ Ð²ÑƒÐ·Ð»Ð° RabbitMQ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ ÐºÐ¾Ð¼Ð¿'ÑŽÑ‚ÐµÑ€Ñ– - Ñ‚Ð¾Ð±Ñ‚Ð¾ localhost. Ð¯ÐºÑ‰Ð¾ Ð¼Ð¸ Ñ…Ð¾Ñ‡ÐµÐ¼Ð¾ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ð¸ÑÑŒ Ð´Ð¾ Ð²ÑƒÐ·Ð»Ð° Ð½Ð° Ñ–Ð½ÑˆÐ¾Ð¼Ñƒ ÐºÐ¾Ð¼Ð¿'ÑŽÑ‚ÐµÑ€Ñ–, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð²ÐºÐ°Ð¶ÐµÐ¼Ð¾ Ð¹Ð¾Ð³Ð¾ Ñ–Ð¼'Ñ Ñ…Ð¾ÑÑ‚Ð° Ð°Ð±Ð¾ IP-Ð°Ð´Ñ€ÐµÑÑƒ Ñ‚ÑƒÑ‚.

Ð”Ð°Ð»Ñ– Ð¼Ð¸ ÑÑ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ ÐºÐ°Ð½Ð°Ð», Ð´Ðµ Ð·Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ð±Ñ–Ð»ÑŒÑˆÑ–ÑÑ‚ÑŒ API Ð´Ð»Ñ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ.

Ð©Ð¾Ð± Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð½Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð¾Ð³Ð¾Ð»Ð¾ÑÐ¸Ñ‚Ð¸ Ñ‡ÐµÑ€Ð³Ñƒ, Ð´Ð¾ ÑÐºÐ¾Ñ— Ð¼Ð¸ Ñ…Ð¾Ñ‡ÐµÐ¼Ð¾ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ; Ð¿Ñ–ÑÐ»Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð¾Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ:

```cs
using System.Text;
using RabbitMQ.Client;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

const string message = "Hello World!";
var body = Encoding.UTF8.GetBytes(message);

channel.BasicPublish(exchange: string.Empty,
                     routingKey: "hello",
                     basicProperties: null,
                     body: body);
Console.WriteLine($" [x] Sent {message}");

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

ÐžÐ³Ð¾Ð»Ð¾ÑˆÐµÐ½Ð½Ñ Ñ‡ÐµÑ€Ð³Ð¸ Ñ” Ñ–Ð´ÐµÐ¼Ð¿Ð¾Ñ‚ÐµÐ½Ñ‚Ð½Ð¸Ð¼ - Ð²Ð¾Ð½Ð¾ Ð±ÑƒÐ´Ðµ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¾ Ð»Ð¸ÑˆÐµ Ñƒ Ð²Ð¸Ð¿Ð°Ð´ÐºÑƒ, ÑÐºÑ‰Ð¾ Ð²Ð¾Ð½Ð° Ñ‰Ðµ Ð½Ðµ Ñ–ÑÐ½ÑƒÑ”. Ð’Ð¼Ñ–ÑÑ‚ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ - Ñ†Ðµ Ð¼Ð°ÑÐ¸Ð² Ð±Ð°Ð¹Ñ‚Ñ–Ð², Ñ‚Ð¾Ð¼Ñƒ Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ ÐºÐ¾Ð´ÑƒÐ²Ð°Ñ‚Ð¸ Ñ‚Ð°Ð¼ Ð²ÑÐµ, Ñ‰Ð¾ Ð·Ð°Ð²Ð³Ð¾Ð´Ð½Ð¾.

ÐšÐ¾Ð»Ð¸ ÐºÐ¾Ð´ Ð²Ð¸Ñ‰Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ” Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ, ÐºÐ°Ð½Ð°Ð» Ñ– Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð·Ð°ÐºÑ€Ð¸Ñ‚Ñ–. Ð¦Ðµ Ð²ÑÐµ ÑÑ‚Ð¾ÑÑƒÑ”Ñ‚ÑŒÑÑ Ð½Ð°ÑˆÐ¾Ð³Ð¾ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð½Ð¸ÐºÐ°.

[ÐžÑÑŒ Ð²ÐµÑÑŒ ÐºÐ»Ð°Ñ Send.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Send/Send.cs)

> **ÐÐ°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ Ð½Ðµ Ð¿Ñ€Ð°Ñ†ÑŽÑ”!**
>
> Ð¯ÐºÑ‰Ð¾ Ñ†Ðµ Ð²Ð°Ñˆ Ð¿ÐµÑ€ÑˆÐ¸Ð¹ Ñ€Ð°Ð· Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ RabbitMQ, Ñ– Ð²Ð¸ Ð½Ðµ Ð±Ð°Ñ‡Ð¸Ñ‚Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ "Sent", Ñ‚Ð¾ Ð²Ð¸, Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾, Ð·Ð°Ð»Ð¸ÑˆÐ¸Ð»Ð¸ÑÑŒ Ð· Ð¿Ð¸Ñ‚Ð°Ð½Ð½ÑÐ¼, Ñ‰Ð¾ Ð¼Ð¾Ð¶Ðµ Ð±ÑƒÑ‚Ð¸ Ð½Ðµ Ñ‚Ð°Ðº. ÐœÐ¾Ð¶Ð»Ð¸Ð²Ð¾, Ð±Ñ€Ð¾ÐºÐµÑ€ Ð±ÑƒÐ² Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¸Ð¹ Ð±ÐµÐ· Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð½ÑŒÐ¾Ñ— Ð²Ñ–Ð»ÑŒÐ½Ð¾Ñ— Ð¼Ñ–ÑÑ†Ñ Ð½Ð° Ð´Ð¸ÑÐºÑƒ (Ð·Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ Ð´Ð»Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ñ‰Ð¾Ð½Ð°Ð¹Ð¼ÐµÐ½ÑˆÐµ 50 ÐœÐ‘ Ð²Ñ–Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¼Ñ–ÑÑ†Ñ) Ñ–, Ð¾Ñ‚Ð¶Ðµ, Ð²Ñ–Ð´Ð¼Ð¾Ð²Ð»ÑÑ”Ñ‚ÑŒÑÑ Ð¿Ñ€Ð¸Ð¹Ð¼Ð°Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ. ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ñ‚Ðµ Ð¶ÑƒÑ€Ð½Ð°Ð» Ð±Ñ€Ð¾ÐºÐµÑ€Ð° Ð´Ð»Ñ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ñ–, Ð·Ð° Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ð¾ÑÑ‚Ñ–, Ð·Ð¼ÐµÐ½ÑˆÑ‚Ðµ Ð»Ñ–Ð¼Ñ–Ñ‚. Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ñ–Ñ Ð· Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð¿Ð¾ÐºÐ°Ð¶Ðµ Ð²Ð°Ð¼, ÑÐº Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ð¸ `disk_free_limit`.

## ÐžÑ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ

Ð©Ð¾ Ð¶ Ð´Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°, Ð²Ñ–Ð½ ÑÐ»ÑƒÑ…Ð°Ñ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð²Ñ–Ð´ RabbitMQ. Ð¢Ð°ÐºÐ¸Ð¼ Ñ‡Ð¸Ð½Ð¾Ð¼, Ð½Ð° Ð²Ñ–Ð´Ð¼Ñ–Ð½Ñƒ Ð²Ñ–Ð´ Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð°, ÑÐºÐ¸Ð¹ Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÑ” Ð¾Ð´Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð¼Ð¸ Ð±ÑƒÐ´ÐµÐ¼Ð¾ Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð° Ð¿Ð¾ÑÑ‚Ñ–Ð¹Ð½Ð¾ Ð¿Ñ€Ð°Ñ†ÑŽÑŽÑ‡Ð¸Ð¼, Ñ‰Ð¾Ð± Ð²Ñ–Ð½ ÑÐ»ÑƒÑ…Ð°Ð² Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ– Ð²Ð¸Ð²Ð¾Ð´Ð¸Ð² Ñ—Ñ….

```mermaid
flowchart LR;
    Q[[Queue_name]]
    C((C))

    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px
    style C fill:#00FF21, stroke:#FFFFFF,stroke-width:2px

    Q-->C
```

ÐšÐ¾Ð´ (Ñƒ Ñ„Ð°Ð¹Ð»Ñ– [Receive.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Receive/Receive.cs)) Ð¼Ð°Ñ” Ð¼Ð°Ð¹Ð¶Ðµ Ñ‚Ñ– Ð¶ ÑÐ°Ð¼Ñ– Ð±Ð»Ð¾ÐºÐ¸ ÐºÐ¾Ð´Ñƒ `using`, Ñ‰Ð¾ Ð¹ Ñƒ `Send`:
```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;
```

ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð°Ð½Ð°Ð»Ð¾Ð³Ñ–Ñ‡Ð½Ðµ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð½Ð¸ÐºÑƒ; Ð¼Ð¸ Ð²Ñ–Ð´ÐºÑ€Ð¸Ð²Ð°Ñ”Ð¼Ð¾ Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ñ– ÐºÐ°Ð½Ð°Ð», Ñ‚Ð° Ð¾Ð³Ð¾Ð»Ð¾ÑˆÑƒÑ”Ð¼Ð¾ Ñ‡ÐµÑ€Ð³Ñƒ, Ð· ÑÐºÐ¾Ñ— Ð¼Ð¸ Ð±ÑƒÐ´ÐµÐ¼Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‚Ð¸. Ð—Ð°ÑƒÐ²Ð°Ð¶Ñ‚Ðµ, Ñ‰Ð¾ Ñ†Ðµ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ” Ñ‡ÐµÑ€Ð·Ñ–, Ð½Ð° ÑÐºÑƒ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ `Send`.

```cs
var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);
...
```

Ð—Ð²ÐµÑ€Ð½Ñ–Ñ‚ÑŒ ÑƒÐ²Ð°Ð³Ñƒ, Ñ‰Ð¾ Ð¼Ð¸ Ñ‚Ð°ÐºÐ¾Ð¶ Ð¾Ð³Ð¾Ð»Ð¾ÑˆÑƒÑ”Ð¼Ð¾ Ñ‡ÐµÑ€Ð³Ñƒ Ñ‚ÑƒÑ‚. ÐžÑÐºÑ–Ð»ÑŒÐºÐ¸ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ð¸ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð° Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð½Ð¸ÐºÐ¾Ð¼, Ð¼Ð¸ Ñ…Ð¾Ñ‡ÐµÐ¼Ð¾ Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ñ‚Ð¸ÑÑ, Ñ‰Ð¾ Ñ‡ÐµÑ€Ð³Ð° Ñ–ÑÐ½ÑƒÑ”, Ð¿ÐµÑ€Ñˆ Ð½Ñ–Ð¶ Ð¼Ð¸ ÑÐ¿Ñ€Ð¾Ð±ÑƒÑ”Ð¼Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð· Ð½ÐµÑ—.

ÐœÐ¸ Ð·Ð±Ð¸Ñ€Ð°Ñ”Ð¼Ð¾ÑÑ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð¸Ñ‚Ð¸ ÑÐµÑ€Ð²ÐµÑ€, Ñ‰Ð¾Ð± Ð²Ñ–Ð½ Ð´Ð¾ÑÑ‚Ð°Ð²Ð¸Ð² Ð½Ð°Ð¼ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð· Ñ‡ÐµÑ€Ð³Ð¸. ÐžÑÐºÑ–Ð»ÑŒÐºÐ¸ Ð²Ñ–Ð½ Ð±ÑƒÐ´Ðµ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚Ð¸ Ð½Ð°Ð¼ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾, Ð¼Ð¸ Ð½Ð°Ð´Ð°Ñ”Ð¼Ð¾ Ð·Ð²Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸Ð¹ Ð²Ð¸ÐºÐ»Ð¸Ðº. Ð¦Ðµ Ñ‚Ðµ, Ñ‰Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚ÑŒ Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸Ðº Ð¿Ð¾Ð´Ñ–Ð¹ `EventingBasicConsumer.Received`.

```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

Console.WriteLine(" [*] Waiting for messages.");

var consumer = new EventingBasicConsumer(channel);
consumer.Received += (model, ea) =>
{
    var body = ea.Body.ToArray();
    var message = Encoding.UTF8.GetString(body);
    Console.WriteLine($" [x] Received {message}");
};
channel.BasicConsume(queue: "hello",
                     autoAck: true,
                     consumer: consumer);

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

[ÐžÑÑŒ Ð²ÐµÑÑŒ ÐºÐ»Ð°Ñ Receive.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Receive/Receive.cs):

## ÐžÐ±'Ñ”Ð´Ð½Ð°Ð¹Ð¼Ð¾ Ð²ÑÐµ Ñ€Ð°Ð·Ð¾Ð¼.
Ð’Ñ–Ð´ÐºÑ€Ð¸Ð¹Ñ‚Ðµ Ð´Ð²Ð° Ñ‚ÐµÑ€Ð¼Ñ–Ð½Ð°Ð»ÑŒÐ½Ñ– Ð²Ñ–ÐºÐ½Ð°.

Ð’Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚Ð¸ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð¸ Ñƒ Ð±ÑƒÐ´ÑŒ-ÑÐºÐ¾Ð¼Ñƒ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ, Ð¾ÑÐºÑ–Ð»ÑŒÐºÐ¸ Ð¾Ð±Ð¸Ð´Ð²Ð° Ð¾Ð³Ð¾Ð»Ð¾ÑˆÑƒÑŽÑ‚ÑŒ Ñ‡ÐµÑ€Ð³Ñƒ. ÐœÐ¸ ÑÐ¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ð¼Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°, Ñ‰Ð¾Ð± Ð²Ð¸ Ð¼Ð¾Ð³Ð»Ð¸ Ð¿Ð¾Ð±Ð°Ñ‡Ð¸Ñ‚Ð¸, ÑÐº Ð²Ñ–Ð½ Ð¾Ñ‡Ñ–ÐºÑƒÑ” Ñ‚Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.
```powershell
cd Receive
dotnet run
```

Ð”Ð°Ð»Ñ– Ð·Ð°Ð¿ÑƒÑÑ‚Ñ–Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð°.

```powershell
cd Send
dotnet run
```

Ð¡Ð¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ñ€Ð¾Ð·Ð´Ñ€ÑƒÐºÑƒÑ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÑÐºÐµ Ð²Ñ–Ð½ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ” Ð²Ñ–Ð´ Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· RabbitMQ. Ð¡Ð¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ð±ÑƒÐ´Ðµ Ð¿Ñ€Ð¾Ð´Ð¾Ð²Ð¶ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ñ€Ð°Ñ†ÑŽÐ²Ð°Ñ‚Ð¸, Ð¾Ñ‡Ñ–ÐºÑƒÑŽÑ‡Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ, Ñ‚Ð¾Ð¼Ñƒ ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ð¸ Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ° ÐºÑ–Ð»ÑŒÐºÐ° Ñ€Ð°Ð·Ñ–Ð².

Ð§Ð°Ñ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð´Ð¾ Ð´Ñ€ÑƒÐ³Ð¾Ñ— Ñ‡Ð°ÑÑ‚Ð¸Ð½Ð¸ Ñ– Ð¿Ð¾Ð±ÑƒÐ´ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ñƒ Ñ€Ð¾Ð±Ð¾Ñ‡Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ.

---

# ÐÐ°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð· RabbitMQ - Ð Ð¾Ð±Ð¾Ñ‡Ñ– Ð§ÐµÑ€Ð³Ð¸
## Ð Ð¾Ð±Ð¾Ñ‡Ñ– Ð§ÐµÑ€Ð³Ð¸

> [!NOTE]  
> **ÐŸÐ¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸**  
>
> Ð¦ÐµÐ¹ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð¿ÐµÑ€ÐµÐ´Ð±Ð°Ñ‡Ð°Ñ”, Ñ‰Ð¾ RabbitMQ Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ– Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð½Ð° `localhost` Ð·Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¸Ð¼ Ð¿Ð¾Ñ€Ñ‚Ð¾Ð¼ (5672). Ð£ Ñ€Ð°Ð·Ñ– Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ Ñ–Ð½ÑˆÐ¾Ð³Ð¾ Ñ…Ð¾ÑÑ‚Ñƒ, Ð¿Ð¾Ñ€Ñ‚Ñƒ Ð°Ð±Ð¾ Ð¾Ð±Ð»Ñ–ÐºÐ¾Ð²Ð¸Ñ… Ð´Ð°Ð½Ð¸Ñ…, Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð±ÑƒÐ´Ðµ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C1((Câ‚))
    C2((Câ‚‚))

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style Q fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style C1 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px
    style C2 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px, color:#FF0000

    P-->Q-->C1
    Q-->C2
```

Ð£ Ð¿ÐµÑ€ÑˆÐ¾Ð¼Ñƒ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÑƒ Ð¼Ð¸ Ð½Ð°Ð¿Ð¸ÑÐ°Ð»Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ Ñ‚Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ Ð· Ñ–Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¾Ñ— Ñ‡ÐµÑ€Ð³Ð¸. Ð£ Ñ†ÑŒÐ¾Ð¼Ñƒ Ð¼Ð¸ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ð¼Ð¾ ***Ð Ð¾Ð±Ð¾Ñ‡Ñƒ Ð§ÐµÑ€Ð³Ñƒ***, ÑÐºÐ° Ð±ÑƒÐ´Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ÑÑ Ð´Ð»Ñ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»Ñƒ Ñ‡Ð°ÑÐ¾Ð¼Ñ–ÑÑ‚ÐºÐ¸Ñ… Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ ÑÐµÑ€ÐµÐ´ ÐºÑ–Ð»ÑŒÐºÐ¾Ñ… Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑ–Ð².

ÐžÑÐ½Ð¾Ð²Ð½Ð° Ñ–Ð´ÐµÑ Ð·Ð° Ð Ð¾Ð±Ð¾Ñ‡Ð¸Ð¼Ð¸ Ð§ÐµÑ€Ð³Ð°Ð¼Ð¸ (Ñ‚Ð°ÐºÐ¾Ð¶ Ð²Ñ–Ð´Ð¾Ð¼Ð¸Ð¼Ð¸ ÑÐº: Ð§ÐµÑ€Ð³Ð¸ Ð—Ð°Ð²Ð´Ð°Ð½ÑŒ) Ð¿Ð¾Ð»ÑÐ³Ð°Ñ” Ð² ÑƒÐ½Ð¸ÐºÐ½ÐµÐ½Ð½Ñ– Ð±ÐµÐ·Ð¿Ð¾ÑÐµÑ€ÐµÐ´Ð½ÑŒÐ¾Ð³Ð¾ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ñ”Ð¼ÐºÐ¸Ñ… Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ Ñ– Ð¾Ñ‡Ñ–ÐºÑƒÐ²Ð°Ð½Ð½Ñ– Ñ—Ñ… Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ. Ð—Ð°Ð¼Ñ–ÑÑ‚ÑŒ Ñ†ÑŒÐ¾Ð³Ð¾ Ð¼Ð¸ Ð¿Ð»Ð°Ð½ÑƒÑ”Ð¼Ð¾ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð½Ð° Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐ¸Ð¹ Ñ‡Ð°Ñ. ÐœÐ¸ Ñ–Ð½ÐºÐ°Ð¿ÑÑƒÐ»ÑŽÑ”Ð¼Ð¾ ***Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ*** Ñƒ Ð²Ð¸Ð³Ð»ÑÐ´Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ‚Ð° Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ñ”Ð¼Ð¾ Ð¹Ð¾Ð³Ð¾ Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ. Ð Ð¾Ð±Ð¾Ñ‡Ð¸Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑ, Ñ‰Ð¾ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ñƒ Ñ„Ð¾Ð½Ð¾Ð²Ð¾Ð¼Ñƒ Ñ€ÐµÐ¶Ð¸Ð¼Ñ–, Ð²Ð¸Ñ‚ÑÐ³Ð½Ðµ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð· Ñ‡ÐµÑ€Ð³Ð¸ Ñ‚Ð° Ð² ÐºÑ–Ð½Ñ†ÐµÐ²Ð¾Ð¼Ñƒ Ð¿Ñ–Ð´ÑÑƒÐ¼ÐºÑƒ Ð²Ð¸ÐºÐ¾Ð½Ð°Ñ” Ð¹Ð¾Ð³Ð¾. ÐšÐ¾Ð»Ð¸ Ð²Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ñ‚Ðµ Ð±Ð°Ð³Ð°Ñ‚Ð¾ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑ–Ð², Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð±ÑƒÐ´Ðµ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»ÐµÐ½Ð¾ Ð¼Ñ–Ð¶ Ð½Ð¸Ð¼Ð¸.

Ð¦Ñ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ñ–Ñ Ð¾ÑÐ¾Ð±Ð»Ð¸Ð²Ð¾ ÐºÐ¾Ñ€Ð¸ÑÐ½Ð° Ð² Ð²ÐµÐ±-Ð´Ð¾Ð´Ð°Ñ‚ÐºÐ°Ñ…, Ð´Ðµ Ð½ÐµÐ¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð¾Ð±Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ ÑÐºÐ»Ð°Ð´Ð½Ðµ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð¿Ñ€Ð¾Ñ‚ÑÐ³Ð¾Ð¼ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð³Ð¾ Ð²Ñ–ÐºÐ½Ð° HTTP-Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ.

## ÐŸÑ–Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°

Ð£ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ–Ð¹ Ñ‡Ð°ÑÑ‚Ð¸Ð½Ñ– Ñ†ÑŒÐ¾Ð³Ð¾ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÐ° Ð¼Ð¸ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð»Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð·Ñ– ÑÑ‚Ñ€Ñ–Ñ‡ÐºÐ¾ÑŽ "Hello World!". Ð¢ÐµÐ¿ÐµÑ€ Ð¼Ð¸ Ð±ÑƒÐ´ÐµÐ¼Ð¾ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ñ‚Ð¸ Ñ€ÑÐ´ÐºÐ¸, ÑÐºÑ– Ð²Ñ–Ð´Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑŒ ÑÐºÐ»Ð°Ð´Ð½Ñ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ. Ð£ Ð½Ð°Ñ Ð½ÐµÐ¼Ð°Ñ” Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¸Ñ… Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð·Ð¼ÐµÐ½ÑˆÐµÐ½Ð½Ñ Ñ€Ð¾Ð·Ð¼Ñ–Ñ€Ñƒ Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½ÑŒ Ð°Ð±Ð¾ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³ PDF-Ñ„Ð°Ð¹Ð»Ñ–Ð², Ñ‚Ð¾Ð¼Ñƒ Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¸Ð³Ð°Ð´Ð°Ñ”Ð¼Ð¾, Ñ‰Ð¾ Ð¼Ð¸ Ð·Ð°Ð¹Ð½ÑÑ‚Ñ– - Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑŽÑ‡Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ñ–ÑŽ `Thread.Sleep()` (Ð²Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð´Ð¾Ð´Ð°Ñ‚Ð¸ `using System.Threading;` Ð² ÑÐ°Ð¼Ð¾Ð¼Ñƒ Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ñ„Ð°Ð¹Ð»Ñƒ, Ñ‰Ð¾Ð± Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð´Ð¾ API-Ñ„ÑƒÐ½ÐºÑ†Ñ–Ð¹ Ð¿Ð¾Ñ‚Ð¾ÐºÑ–Ð²). ÐœÐ¸ Ð±ÑƒÐ´ÐµÐ¼Ð¾ Ð²Ð²Ð°Ð¶Ð°Ñ‚Ð¸ ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ ÐºÑ€Ð°Ð¿Ð¾Ðº Ñƒ Ñ€ÑÐ´ÐºÑƒ Ð¹Ð¾Ð³Ð¾ ÑÐºÐ»Ð°Ð´Ð½Ñ–ÑÑ‚ÑŽ; ÐºÐ¾Ð¶Ð½Ð° ÐºÑ€Ð°Ð¿ÐºÐ° Ð±ÑƒÐ´Ðµ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ‚Ð¸ Ð¾Ð´Ð½Ñ–Ð¹ ÑÐµÐºÑƒÐ½Ð´Ñ– "Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸". ÐÐ°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð²Ð¸Ð³Ð°Ð´Ð°Ð½Ðµ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ, Ð¾Ð¿Ð¸ÑÐ°Ð½Ðµ Ñ€ÑÐ´ÐºÐ¾Ð¼ `Hello...`, Ð·Ð°Ð¹Ð¼Ðµ Ñ‚Ñ€Ð¸ ÑÐµÐºÑƒÐ½Ð´Ð¸.

ÐœÐ¸ Ð½ÐµÐ·Ð½Ð°Ñ‡Ð½Ð¾ Ð·Ð¼Ñ–Ð½Ð¸Ð¼Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ñƒ ***Send*** Ð· Ð½Ð°ÑˆÐ¾Ð³Ð¾ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½ÑŒÐ¾Ð³Ð¾ Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´Ñƒ, Ñ‰Ð¾Ð± Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚Ð¸ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚Ð¸ Ð´Ð¾Ð²Ñ–Ð»ÑŒÐ½Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð· ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð³Ð¾ Ñ€ÑÐ´ÐºÐ°. Ð¦Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð° Ð±ÑƒÐ´Ðµ Ð¿Ð»Ð°Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð´Ð¾ Ð½Ð°ÑˆÐ¾Ñ— Ñ€Ð¾Ð±Ð¾Ñ‡Ð¾Ñ— Ñ‡ÐµÑ€Ð³Ð¸, Ñ‚Ð¾Ð¼Ñƒ Ð½Ð°Ð·Ð²ÐµÐ¼Ð¾ Ñ—Ñ— `NewTask`.

Ð¯Ðº Ñ– Ð² Ð¿ÐµÑ€ÑˆÐ¾Ð¼Ñƒ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÑƒ, Ð½Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð´Ð²Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸.

```powershell
dotnet new console --name NewTask
mv NewTask/Program.cs NewTask/NewTask.cs
dotnet new console --name Worker
mv Worker/Program.cs Worker/Worker.cs
cd NewTask
dotnet add package RabbitMQ.Client
cd /docs/Worker
dotnet add package RabbitMQ.Client
```

Ð¡ÐºÐ¾Ð¿Ñ–ÑŽÐ¹Ñ‚Ðµ ÐºÐ¾Ð´ Ð·Ñ– ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ ***Send.cs*** Ð´Ð¾ ***NewTask.cs*** Ñ‚Ð° Ð²Ð½ÐµÑÑ–Ñ‚ÑŒ Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ñ– Ð·Ð¼Ñ–Ð½Ð¸.

ÐžÐ½Ð¾Ð²Ñ–Ñ‚ÑŒ Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–ÑŽ Ð·Ð¼Ñ–Ð½Ð½Ð¾Ñ— ***message***:

```cs
var message = GetMessage(args);
```

Add the ***GetMessage*** method to the end of the ***NewTask*** class:

```cs
static string GetMessage(string[] args)
{
    return ((args.Length > 0) ? string.Join(" ", args) : "Hello World!");
}
```

ÐÐ°ÑˆÐ¾Ð¼Ñƒ ÑÑ‚Ð°Ñ€Ð¾Ð¼Ñƒ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñƒ ***Receive.cs*** Ñ‚Ð°ÐºÐ¾Ð¶ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ñ– Ð´ÐµÑÐºÑ– Ð·Ð¼Ñ–Ð½Ð¸, Ñ‰Ð¾Ð± Ð²Ð¸Ð³Ð»ÑÐ´Ð°Ñ‚Ð¸ ÑÐº Ð¾Ð´Ð½Ð° ÑÐµÐºÑƒÐ½Ð´Ð° Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð½Ð° ÐºÐ¾Ð¶Ð½Ñƒ ÐºÑ€Ð°Ð¿ÐºÑƒ Ð² Ñ‚Ñ–Ð»Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ. Ð’Ñ–Ð½ Ð±ÑƒÐ´Ðµ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÑÑ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ– RabbitMQ, Ñ‚Ð° Ð²Ð¸ÐºÐ¾Ð½ÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ, Ñ‚Ð¾Ð¼Ñƒ ÑÐºÐ¾Ð¿Ñ–ÑŽÐ¹Ñ‚Ðµ Ð¹Ð¾Ð³Ð¾ Ð´Ð¾ ***Worker.cs*** Ñ‚Ð° Ð²Ð½ÐµÑÑ–Ñ‚ÑŒ Ð·Ð¼Ñ–Ð½Ð¸, ÑÐº Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð½Ð¸Ð¶Ñ‡Ðµ.

ÐŸÑ–ÑÐ»Ñ Ð½Ð°ÑˆÐ¾Ð³Ð¾ Ñ–ÑÐ½ÑƒÑŽÑ‡Ð¾Ð³Ð¾ ***WriteLine*** Ð´Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð´Ð¾Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ñ–ÐºÑ‚Ð¸Ð²Ð½Ðµ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð´Ð»Ñ ÑÐ¸Ð¼ÑƒÐ»ÑÑ†Ñ–Ñ— Ñ‡Ð°ÑÑƒ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ:

```cs
Console.WriteLine($" [x] Received {message}");

int dots = message.Split('.').Length - 1;
Thread.Sleep(dots * 1000);

Console.WriteLine(" [x] Done");
```

# Ð”Ð¸ÑÐ¿ÐµÑ‚Ñ‡Ð¸Ñ€Ð¸Ð·Ð°Ñ†Ñ–Ñ ÐºÑ€ÑƒÐ³ Ð¿Ð¾ ÐºÑ€ÑƒÐ³Ñƒ (round-robin) 

ÐžÐ´Ð½Ñ–Ñ”ÑŽ Ð· Ð¿ÐµÑ€ÐµÐ²Ð°Ð³ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ Ð§ÐµÑ€Ð³Ð¸ Ð—Ð°Ð²Ð´Ð°Ð½ÑŒ Ñ” Ð·Ð´Ð°Ñ‚Ð½Ñ–ÑÑ‚ÑŒ Ð»ÐµÐ³ÐºÐ¾ Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ. Ð¯ÐºÑ‰Ð¾ Ñƒ Ð½Ð°Ñ Ð½Ð°ÐºÐ¾Ð¿Ð¸Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ Ð²ÐµÐ»Ð¸ÐºÐ° ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸, Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð±Ñ–Ð»ÑŒÑˆÐµ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑ–Ð² Ñ– Ñ‚Ð°ÐºÐ¸Ð¼ Ñ‡Ð¸Ð½Ð¾Ð¼ Ð»ÐµÐ³ÐºÐ¾ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±ÑƒÐ²Ð°Ñ‚Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ.

Ð¡Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÑÐ¿Ñ€Ð¾Ð±ÑƒÑ”Ð¼Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ð¸ Ð´Ð²Ð° ÐµÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð¸ `Worker` Ð¾Ð´Ð½Ð¾Ñ‡Ð°ÑÐ½Ð¾. Ð’Ð¾Ð½Ð¸ Ð¾Ð±Ð¸Ð´Ð²Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°ÑŽÑ‚ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð· Ñ‡ÐµÑ€Ð³Ð¸, Ð°Ð»Ðµ ÑÐº ÑÐ°Ð¼Ðµ Ñ†Ðµ Ð²Ñ–Ð´Ð±ÑƒÐ´ÐµÑ‚ÑŒÑÑ? Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ð¾Ð´Ð¸Ð²Ð¸Ð¼Ð¾ÑÑ.

Ð’Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð²Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ Ñ‚Ñ€Ð¸ ÐºÐ¾Ð½ÑÐ¾Ð»Ñ–. Ð”Ð²Ñ– Ð· Ð½Ð¸Ñ… Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ñƒ `Worker`. Ð¦Ñ– ÐºÐ¾Ð½ÑÐ¾Ð»Ñ– Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð½Ð°ÑˆÐ¸Ð¼Ð¸ Ð´Ð²Ð¾Ð¼Ð° ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°Ð¼Ð¸ - C1 Ñ‚Ð° C2.

```powershell
# shell 1
cd Worker
dotnet run
# => Press [enter] to exit.
```

```powershell
# shell 2
cd Worker
dotnet run
# => Press [enter] to exit.
```

Ð£ Ñ‚Ñ€ÐµÑ‚Ñ–Ð¹ ÐºÐ¾Ð½ÑÐ¾Ð»Ñ– Ð¼Ð¸ Ð±ÑƒÐ´ÐµÐ¼Ð¾ Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÐ²Ð°Ñ‚Ð¸ Ð½Ð¾Ð²Ñ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ. ÐŸÑ–ÑÐ»Ñ Ð·Ð°Ð¿ÑƒÑÐºÑƒ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñ–Ð² Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¾Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÐ²Ð°Ñ‚Ð¸ ÐºÑ–Ð»ÑŒÐºÐ° Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ:

```powershell
# shell 3
cd NewTask
dotnet run "First message."
dotnet run "Second message.."
dotnet run "Third message..."
dotnet run "Fourth message...."
dotnet run "Fifth message....."
```

ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ð¼Ð¾, Ñ‰Ð¾ Ð±ÑƒÐ´Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ð´Ð¾ Ð½Ð°ÑˆÐ¸Ñ… Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑ–Ð²:

```powershell
# shell 1
# => Press [enter] to exit.
# => [x] Received First message.
# => [x] Done
# => [x] Received Third message...
# => [x] Done
# => [x] Received Fifth message.....
# => [x] Done
```

```powershell
# shell 2
# => Press [enter] to exit.
# => [x] Received Second message..
# => [x] Done
# => [x] Received Fourth message....
# => [x] Done
```

Ð—Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ RabbitMQ Ð±ÑƒÐ´Ðµ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ñ‚Ð¸ ÐºÐ¾Ð¶Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð¾Ð¼Ñƒ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñƒ Ñƒ Ð¿Ð¾ÑÐ»Ñ–Ð´Ð¾Ð²Ð½Ð¾ÑÑ‚Ñ–. Ð£ ÑÐµÑ€ÐµÐ´Ð½ÑŒÐ¾Ð¼Ñƒ ÐºÐ¾Ð¶ÐµÐ½ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ” Ð¾Ð´Ð½Ð°ÐºÐ¾Ð²Ñƒ ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ. Ð¦ÐµÐ¹ ÑÐ¿Ð¾ÑÑ–Ð± Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»Ñƒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ Ð½Ð°Ð·Ð¸Ð²Ð°Ñ”Ñ‚ÑŒÑÑ "ÐºÑ€ÑƒÐ³ Ð¿Ð¾ ÐºÑ€ÑƒÐ³Ñƒ". Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ†Ðµ Ð· Ñ‚Ñ€ÑŒÐ¾Ð¼Ð° Ð°Ð±Ð¾ Ð±Ñ–Ð»ÑŒÑˆÐµ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸.

## ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ

Ð’Ð¸ÐºÐ¾Ð½Ð°Ð½Ð½Ñ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð¼Ð¾Ð¶Ðµ Ð·Ð°Ð¹Ð½ÑÑ‚Ð¸ ÐºÑ–Ð»ÑŒÐºÐ° ÑÐµÐºÑƒÐ½Ð´. Ð’Ð¸, Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾, Ñ†Ñ–ÐºÐ°Ð²Ð¸Ñ‚ÐµÑÑŒ, Ñ‰Ð¾ ÑÑ‚Ð°Ð½ÐµÑ‚ÑŒÑÑ, ÑÐºÑ‰Ð¾ Ð¾Ð´Ð¸Ð½ Ñ–Ð· ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñ–Ð² Ð¿Ð¾Ñ‡Ð½Ðµ Ð´Ð¾Ð²Ð³Ðµ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ñ– Ð¿Ð¾Ð¼Ñ€Ðµ, ÐºÐ¾Ð»Ð¸ Ð²Ð¾Ð½Ð¾ Ñ‰Ðµ Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾. Ð—Ð° Ð½Ð°ÑˆÐ¸Ð¼ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¸Ð¼ ÐºÐ¾Ð´Ð¾Ð¼, ÑÐº Ñ‚Ñ–Ð»ÑŒÐºÐ¸ RabbitMQ Ð´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñƒ, Ð²Ñ–Ð½ Ð²Ñ–Ð´Ñ€Ð°Ð·Ñƒ Ð¿Ð¾Ð·Ð½Ð°Ñ‡Ð°Ñ” Ð¹Ð¾Ð³Ð¾ Ð´Ð»Ñ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ. Ð£ Ñ†ÑŒÐ¾Ð¼Ñƒ Ð²Ð¸Ð¿Ð°Ð´ÐºÑƒ, ÑÐºÑ‰Ð¾ Ð²Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚Ðµ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°, Ð¼Ð¸ Ð²Ñ‚Ñ€Ð°Ñ‚Ð¸Ð¼Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÑÐºÐµ Ð²Ñ–Ð½ Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ñ‰Ð¾ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÑÐ². ÐœÐ¸ Ñ‚Ð°ÐºÐ¾Ð¶ Ð²Ñ‚Ñ€Ð°Ñ‚Ð¸Ð¼Ð¾ Ð²ÑÑ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÑÐºÑ– Ð±ÑƒÐ»Ð¸ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»ÐµÐ½Ñ– Ñ†ÑŒÐ¾Ð¼Ñƒ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¼Ñƒ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑƒ, Ð°Ð»Ðµ Ñ‰Ðµ Ð½Ðµ Ð±ÑƒÐ»Ð¸ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÐµÐ½Ñ–.

ÐÐ»Ðµ Ð¼Ð¸ Ð½Ðµ Ñ…Ð¾Ñ‡ÐµÐ¼Ð¾ Ð²Ñ‚Ñ€Ð°Ñ‡Ð°Ñ‚Ð¸ Ð¶Ð¾Ð´Ð½Ð¸Ñ… Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ. Ð¯ÐºÑ‰Ð¾ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸Ðº Ð¿Ð¾Ð¼Ñ€Ðµ, Ð¼Ð¸ Ñ…Ð¾Ñ‚Ñ–Ð»Ð¸ Ð±, Ñ‰Ð¾Ð± Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð±ÑƒÐ»Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ñ–Ð½ÑˆÐ¾Ð¼Ñƒ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑƒ.

Ð”Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‰Ð¾Ð± ÑƒÐ¿ÐµÐ²Ð½Ð¸Ñ‚Ð¸ÑÑ, Ñ‰Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ñ–ÐºÐ¾Ð»Ð¸ Ð½Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡Ð°ÑŽÑ‚ÑŒÑÑ, RabbitMQ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” [Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ](https://www.rabbitmq.com/docs/confirms). ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ (`ack(nowledgement)`) Ð·Ð²Ð¾Ñ€Ð¾Ñ‚Ð½ÑŒÐ¾ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ñ‚ÑŒÑÑ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ÐµÐ¼, Ñ‰Ð¾Ð± Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð¸Ñ‚Ð¸ RabbitMQ, Ñ‰Ð¾ Ð¿ÐµÐ²Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð±ÑƒÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð¾, Ð¾Ð±Ñ€Ð¾Ð±Ð»ÐµÐ½Ð¾ Ñ– Ñ‰Ð¾ RabbitMQ Ð¼Ð¾Ð¶Ðµ Ð²Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸ Ð¹Ð¾Ð³Ð¾.

Ð¯ÐºÑ‰Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ð¿Ð¾Ð¼Ñ€Ðµ (Ð¹Ð¾Ð³Ð¾ ÐºÐ°Ð½Ð°Ð» Ð±ÑƒÐ´Ðµ Ð·Ð°ÐºÑ€Ð¸Ñ‚Ð¾, Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð±ÑƒÐ´Ðµ Ð·Ð°ÐºÑ€Ð¸Ñ‚Ð¾ Ð°Ð±Ð¾ TCP-Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾) Ð±ÐµÐ· Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ (ack), RabbitMQ Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸Ð¼Ðµ, Ñ‰Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ðµ Ð±ÑƒÐ»Ð¾ Ð¿Ð¾Ð²Ð½Ñ–ÑÑ‚ÑŽ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÐµÐ½Ð¾, Ñ– Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð²ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¹Ð¾Ð³Ð¾ Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ. Ð¯ÐºÑ‰Ð¾ Ð² Ñ†ÐµÐ¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ñ–ÑÐ½ÑƒÑŽÑ‚ÑŒ Ñ–Ð½ÑˆÑ– ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñ–, Ð²Ñ–Ð½ ÑˆÐ²Ð¸Ð´ÐºÐ¾ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¹Ð¾Ð³Ð¾ Ñ–Ð½ÑˆÐ¾Ð¼Ñƒ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñƒ. Ð¢Ð°ÐºÐ¸Ð¼ Ñ‡Ð¸Ð½Ð¾Ð¼, Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð±ÑƒÑ‚Ð¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–, Ñ‰Ð¾ Ð¶Ð¾Ð´Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾, Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐºÑ‰Ð¾ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ¸ Ñ‡Ð°Ñ Ð²Ñ–Ð´ Ñ‡Ð°ÑÑƒ Ð·Ð°Ð³Ð¸Ð½Ð°ÑŽÑ‚ÑŒ.

ÐÐ° Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð° Ð½Ð°ÐºÐ»Ð°Ð´ÐµÐ½Ð¾ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚ (Ð·Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ 30 Ñ…Ð²Ð¸Ð»Ð¸Ð½). Ð¦Ðµ Ð´Ð¾Ð¿Ð¾Ð¼Ð°Ð³Ð°Ñ” Ð²Ð¸ÑÐ²Ð»ÑÑ‚Ð¸ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¾Ð²Ñ– (Ð·Ð°Ð±Ð»Ð¾ÐºÐ¾Ð²Ð°Ð½Ñ–) ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ñ–, ÑÐºÑ– Ð½Ñ–ÐºÐ¾Ð»Ð¸ Ð½Ðµ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÑƒÑŽÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÑƒ. Ð’Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð±Ñ–Ð»ÑŒÑˆÐ¸Ñ‚Ð¸ Ñ†ÐµÐ¹ Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚, ÑÐº Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð² [Ð¢Ð°Ð¹Ð¼Ð°ÑƒÑ‚ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸](https://www.rabbitmq.com/docs/consumers#acknowledgement-timeout).

[Ð ÑƒÑ‡Ð½Ðµ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ](https://www.rabbitmq.com/docs/confirms) Ð²Ð²Ñ–Ð¼ÐºÐ½ÐµÐ½Ð¾ Ð·Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼. Ð£ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ–Ñ… Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´Ð°Ñ… Ð¼Ð¸ ÑÐ²Ð½Ð¾ Ð²Ð¸Ð¼ÐºÐ½ÑƒÐ»Ð¸ Ð¹Ð¾Ð³Ð¾, Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð²ÑˆÐ¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ autoAck ("Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ") Ð½Ð° Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ true. Ð¦Ðµ Ñ‡Ð°Ñ Ð²Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸ Ñ†ÐµÐ¹ Ð¿Ñ€Ð°Ð¿Ð¾Ñ€ÐµÑ†ÑŒ Ñ– Ð²Ñ€ÑƒÑ‡Ð½Ñƒ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ñ‚Ð¸ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð½Ðµ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð²Ñ–Ð´ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°, ÑÐº Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ð¼Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ð¼Ð¾ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ.

ÐŸÑ–ÑÐ»Ñ Ñ–ÑÐ½ÑƒÑŽÑ‡Ð¾Ð³Ð¾ Ð²Ð¸ÐºÐ»Ð¸ÐºÑƒ ***WriteLine*** Ð´Ð¾Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¸ÐºÐ»Ð¸Ðº ***BasicAck*** Ñ‚Ð° Ð¾Ð½Ð¾Ð²Ñ–Ñ‚ÑŒ **BasicConsume** Ñ‚Ð°ÐºÐ¸Ð¼ Ñ‡Ð¸Ð½Ð¾Ð¼ ***autoAck:false***:

```cs
    Console.WriteLine(" [x] Done");

    // here channel could also be accessed as ((EventingBasicConsumer)sender).Model
    channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false);
};
channel.BasicConsume(queue: "hello",
                     autoAck: false,
                     consumer: consumer);
```

Ð— Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½ÑÐ¼ Ñ†ÑŒÐ¾Ð³Ð¾ ÐºÐ¾Ð´Ñƒ Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ñ‚Ð¸ÑÑ, Ñ‰Ð¾ Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐºÑ‰Ð¾ Ð²Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚Ðµ Ð²ÑƒÐ·Ð¾Ð» Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ° Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ `CTRL`+`C` Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð½Ñ–Ñ‡Ð¾Ð³Ð¾ Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾. ÐÐµÐ·Ð°Ð±Ð°Ñ€Ð¾Ð¼ Ð¿Ñ–ÑÐ»Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ Ð²ÑƒÐ·Ð»Ð° Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ° Ð²ÑÑ– Ð½ÐµÐ¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ–.

ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð¾ Ð±ÑƒÑ‚Ð¸ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð½Ð° Ñ‚Ð¾Ð¼Ñƒ Ð¶ ÑÐ°Ð¼Ð¾Ð¼Ñƒ ÐºÐ°Ð½Ð°Ð»Ñ–, Ð½Ð° ÑÐºÐ¾Ð¼Ñƒ Ð±ÑƒÐ»Ð¾ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÑƒ. Ð¡Ð¿Ñ€Ð¾Ð±Ð¸ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ Ñ–Ð½ÑˆÐ¾Ð³Ð¾ ÐºÐ°Ð½Ð°Ð»Ñƒ Ð¿Ñ€Ð¸Ð·Ð²ÐµÐ´ÑƒÑ‚ÑŒ Ð´Ð¾ Ð²Ð¸Ð½ÑÑ‚ÐºÑƒ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ñƒ Ð½Ð° Ñ€Ñ–Ð²Ð½Ñ– ÐºÐ°Ð½Ð°Ð»Ñƒ. Ð”Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð´Ð¾Ð´Ð°Ñ‚ÐºÐ¾Ð²Ð¾Ñ— Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ— Ð´Ð¸Ð². [Ð´Ð¾Ð²Ñ–Ð´ÐºÐ¾Ð²Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð· Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½ÑŒ](https://www.rabbitmq.com/docs/confirms).

> **Ð’Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ðµ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ**
>
> ÐŸÑ€Ð¾Ð¿ÑƒÑÐº `BasicAck` - Ñ†Ðµ Ð¿Ð¾ÑˆÐ¸Ñ€ÐµÐ½Ð° Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ°. Ð¦Ðµ Ð»ÐµÐ³ÐºÐ° Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ°, Ð°Ð»Ðµ Ð½Ð°ÑÐ»Ñ–Ð´ÐºÐ¸ ÑÐµÑ€Ð¹Ð¾Ð·Ð½Ñ–. ÐŸÐ¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ–, ÐºÐ¾Ð»Ð¸ Ð²Ð°Ñˆ ÐºÐ»Ñ–Ñ”Ð½Ñ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ (Ñ†Ðµ Ð¼Ð¾Ð¶Ðµ Ð²Ð¸Ð³Ð»ÑÐ´Ð°Ñ‚Ð¸ ÑÐº Ð²Ð¸Ð¿Ð°Ð´ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ), Ð°Ð»Ðµ RabbitMQ Ð±ÑƒÐ´Ðµ Ð·'Ñ—Ð´Ð°Ñ‚Ð¸ Ð²ÑÐµ Ð±Ñ–Ð»ÑŒÑˆÐµ Ñ‚Ð° Ð±Ñ–Ð»ÑŒÑˆÐµ Ð¿Ð°Ð¼'ÑÑ‚Ñ–, Ð¾ÑÐºÑ–Ð»ÑŒÐºÐ¸ Ð²Ñ–Ð½ Ð½Ðµ Ð·Ð¼Ð¾Ð¶Ðµ Ð·Ð²Ñ–Ð»ÑŒÐ½Ð¸Ñ‚Ð¸ Ð½Ñ–ÑÐºÑ– Ð½ÐµÐ¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ.
>
> Ð©Ð¾Ð± Ð½Ð°Ð»Ð°Ð³Ð¾Ð´Ð¸Ñ‚Ð¸ Ñ‚Ð°ÐºÐ¸Ð¹ Ñ‚Ð¸Ð¿ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸, Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ `rabbitmqctl` Ð´Ð»Ñ Ð²Ð¸Ð²ÐµÐ´ÐµÐ½Ð½Ñ Ð¿Ð¾Ð»Ñ `messages_unacknowledged`:
> `sudo rabbitmqctl list_queues name messages_ready messages_unacknowledged`
>
> ÐÐ° Windows Ð²Ð°Ð¼ Ð½Ðµ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ sudo:
> `rabbitmqctl.bat list_queues name messages_ready messages_unacknowledged`

## Ð¡Ñ‚Ñ–Ð¹ÐºÑ–ÑÑ‚ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ

ÐœÐ¸ Ð²Ð¸Ð²Ñ‡Ð¸Ð»Ð¸, ÑÐº Ð·Ð°Ð±ÐµÐ·Ð¿ÐµÑ‡Ð¸Ñ‚Ð¸, Ñ‰Ð¾ Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐºÑ‰Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡ Ð²Ð¼Ð¸Ñ€Ð°Ñ”, Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾. ÐÐ»Ðµ Ð½Ð°ÑˆÑ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð²ÑÐµ Ñ‰Ðµ Ð±ÑƒÐ´ÑƒÑ‚ÑŒ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ñ–, ÑÐºÑ‰Ð¾ ÑÐµÑ€Ð²ÐµÑ€ RabbitMQ Ð·ÑƒÐ¿Ð¸Ð½Ð¸Ñ‚ÑŒÑÑ.

ÐšÐ¾Ð»Ð¸ RabbitMQ Ð·Ð°Ð²ÐµÑ€ÑˆÑƒÑ” Ñ€Ð¾Ð±Ð¾Ñ‚Ñƒ Ð°Ð±Ð¾ Ð°Ð²Ð°Ñ€Ñ–Ð¹Ð½Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÑƒÑ”Ñ‚ÑŒÑÑ, Ð²Ñ–Ð½ Ð·Ð°Ð±ÑƒÐ´Ðµ Ñ‡ÐµÑ€Ð³Ð¸ Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÑÐºÑ‰Ð¾ Ð²Ð¸ Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð¸Ñ‚Ðµ Ð¹Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¾ Ñ†Ðµ. Ð©Ð¾Ð± Ð·Ð°Ð±ÐµÐ·Ð¿ÐµÑ‡Ð¸Ñ‚Ð¸, Ñ‰Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡Ð°ÑŽÑ‚ÑŒÑÑ, Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð¿Ð¾Ð·Ð½Ð°Ñ‡Ð¸Ñ‚Ð¸ ÑÐº Ñ‡ÐµÑ€Ð³Ñƒ, Ñ‚Ð°Ðº Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÑÐº ÑÑ‚Ñ–Ð¹ÐºÑ– (durable).

Ð¡Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð¼Ð¸ Ð¿Ð¾Ð²Ð¸Ð½Ð½Ñ– Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ñ‚Ð¸ÑÑ, Ñ‰Ð¾ Ñ‡ÐµÑ€Ð³Ð° Ð²Ð¸Ð¶Ð¸Ð²Ðµ Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÑƒ Ð²ÑƒÐ·Ð»Ð° RabbitMQ. Ð”Ð»Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ð¼Ð¸ Ð¿Ð¾Ð²Ð¸Ð½Ð½Ñ– Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ñ‚Ð¸ Ñ—Ñ— ÑÐº ÑÑ‚Ñ–Ð¹ÐºÑƒ (***durable***):

```cs
channel.QueueDeclare(queue: "hello",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);
```

Ð¥Ð¾Ñ‡Ð° Ñ†Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð² Ñ†Ñ–Ð»Ð¾Ð¼Ñƒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°, Ð²Ð¾Ð½Ð° Ð½Ðµ Ð¿Ñ€Ð°Ñ†ÑŽÐ²Ð°Ñ‚Ð¸Ð¼Ðµ Ð² Ð½Ð°ÑˆÑ–Ð¹ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ñ–Ð¹ Ð½Ð°Ð»Ð°ÑˆÑ‚Ð¾Ð²Ð°Ð½Ñ–Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ–. Ð¦Ðµ Ñ‚Ð¾Ð¼Ñƒ, Ñ‰Ð¾ Ð¼Ð¸ Ð²Ð¶Ðµ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ð»Ð¸ Ñ‡ÐµÑ€Ð³Ñƒ Ð¿Ñ–Ð´ Ð½Ð°Ð·Ð²Ð¾ÑŽ `hello`, ÑÐºÐ° Ð½Ðµ Ñ” ÑÑ‚Ñ–Ð¹ÐºÐ¾ÑŽ. RabbitMQ Ð½Ðµ Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” Ð²Ð°Ð¼ Ð¿ÐµÑ€ÐµÐ²Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ‚Ð¸ Ñ–ÑÐ½ÑƒÑŽÑ‡Ñƒ Ñ‡ÐµÑ€Ð³Ñƒ Ð· Ñ–Ð½ÑˆÐ¸Ð¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸ Ñ– Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ‚Ð¸Ð¼Ðµ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ Ð±ÑƒÐ´ÑŒ-ÑÐºÑ–Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ñ–, ÑÐºÐ° Ð½Ð°Ð¼Ð°Ð³Ð°Ñ‚Ð¸Ð¼ÐµÑ‚ÑŒÑÑ Ñ†Ðµ Ð·Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸. ÐÐ»Ðµ Ñ” ÑˆÐ²Ð¸Ð´ÐºÐµ Ð¾Ð±Ñ…Ð¾Ð´Ñƒ Ñ†Ñ–Ñ”Ñ— Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð¸ - Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ð¼Ð¾ Ñ‡ÐµÑ€Ð³Ñƒ Ð· Ñ–Ð½ÑˆÐ¾ÑŽ Ð½Ð°Ð·Ð²Ð¾ÑŽ, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, `task_queue`:

Ð—Ð¼Ñ–Ð½Ð¸, Ð²Ð½ÐµÑÐµÐ½Ñ– Ð² `QueueDeclare`, Ð¿Ð¾Ð²Ð¸Ð½Ð½Ñ– Ð±ÑƒÑ‚Ð¸ Ð·Ð°ÑÑ‚Ð¾ÑÐ¾Ð²Ð°Ð½Ñ– ÑÐº Ð´Ð¾ ÐºÐ¾Ð´Ñƒ Ð²Ð¸Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ°, Ñ‚Ð°Ðº Ñ– Ð´Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°. Ð’Ð°Ð¼ Ñ‚Ð°ÐºÐ¾Ð¶ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð·Ð¼Ñ–Ð½Ð¸Ñ‚Ð¸ Ð½Ð°Ð·Ð²Ñƒ Ñ‡ÐµÑ€Ð³Ð¸ Ð´Ð»Ñ `BasicConsume` Ñ‚Ð° `BasicPublish`.

ÐÐ° Ñ†ÑŒÐ¾Ð¼Ñƒ ÐµÑ‚Ð°Ð¿Ñ– Ð¼Ð¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–, Ñ‰Ð¾ Ñ‡ÐµÑ€Ð³Ð° `task_queue` Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð° Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐºÑ‰Ð¾ RabbitMQ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒÑÑ. Ð¢ÐµÐ¿ÐµÑ€ Ð½Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð¿Ð¾Ð·Ð½Ð°Ñ‡Ð¸Ñ‚Ð¸ Ð½Ð°ÑˆÑ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÑÐº ÑÑ‚Ñ–Ð¹ÐºÑ–.

ÐŸÑ–ÑÐ»Ñ Ñ–ÑÐ½ÑƒÑŽÑ‡Ð¾Ð³Ð¾ ***GetBytes***, Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ñ–Ñ‚ÑŒ `IBasicProperties.Persistent` Ð½Ð° `true`:

```cs
var body = Encoding.UTF8.GetBytes(message);

var properties = channel.CreateBasicProperties();
properties.Persistent = true;
```

> **ÐŸÑ€Ð¸Ð¼Ñ–Ñ‚ÐºÐ° Ñ‰Ð¾Ð´Ð¾ Ð·Ð±ÐµÑ€ÐµÐ¶ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ**
> ÐŸÐ¾Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ ÑÐº ÑÑ‚Ñ–Ð¹ÐºÐ¸Ñ… Ð½Ðµ Ð³Ð°Ñ€Ð°Ð½Ñ‚ÑƒÑ” Ð¿Ð¾Ð²Ð½Ñ–ÑÑ‚ÑŽ, Ñ‰Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð²Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾. Ð¥Ð¾Ñ‡Ð° Ñ†Ðµ ÐºÐ°Ð¶Ðµ RabbitMQ Ð·Ð±ÐµÑ€ÐµÐ³Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð½Ð° Ð´Ð¸ÑÐº, Ð²ÑÐµ Ñ‰Ðµ Ñ” ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐµ Ð²Ñ–ÐºÐ½Ð¾ Ñ‡Ð°ÑÑƒ, ÐºÐ¾Ð»Ð¸ RabbitMQ Ð¿Ñ€Ð¸Ð¹Ð½ÑÐ² Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, Ð°Ð»Ðµ Ñ‰Ðµ Ð½Ðµ Ð·Ð±ÐµÑ€Ñ–Ð³ Ð¹Ð¾Ð³Ð¾. ÐšÑ€Ñ–Ð¼ Ñ‚Ð¾Ð³Ð¾, RabbitMQ Ð½Ðµ Ð²Ð¸ÐºÐ¾Ð½ÑƒÑ” `fsync(2)` Ð´Ð»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ - Ð²Ð¾Ð½Ð¾ Ð¼Ð¾Ð¶Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ‚Ð¸ÑÑ Ð² ÐºÐµÑˆÑ– Ñ– Ð½Ð°ÑÐ¿Ñ€Ð°Ð²Ð´Ñ– Ð½Ðµ Ð·Ð°Ð¿Ð¸ÑÑƒÐ²Ð°Ñ‚Ð¸ÑÑ Ð½Ð° Ð´Ð¸ÑÐº. Ð“Ð°Ñ€Ð°Ð½Ñ‚Ñ–Ñ— ÑÑ‚Ñ–Ð¹ÐºÐ¾ÑÑ‚Ñ– Ð½Ðµ Ñ” Ð¼Ñ–Ñ†Ð½Ð¸Ð¼Ð¸, Ð°Ð»Ðµ Ñ†ÑŒÐ¾Ð³Ð¾ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð½ÑŒÐ¾ Ð´Ð»Ñ Ð½Ð°ÑˆÐ¾Ñ— Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ— Ñ‡ÐµÑ€Ð³Ð¸ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ. Ð¯ÐºÑ‰Ð¾ Ð²Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð° Ð¼Ñ–Ñ†Ð½Ñ–ÑˆÐ° Ð³Ð°Ñ€Ð°Ð½Ñ‚Ñ–Ñ, Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ [Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð²Ñ–Ð´ Ð¿Ñ€Ð¾Ð´ÑŽÑÐµÑ€Ð°](https://www.rabbitmq.com/docs/confirms).

## Ð¡Ð¿Ñ€Ð°Ð²ÐµÐ´Ð»Ð¸Ð²Ð° Ñ€Ð¾Ð·ÑÐ¸Ð»ÐºÐ°

ÐœÐ¾Ð¶Ð»Ð¸Ð²Ð¾, Ð²Ð¸ Ð¿Ð¾Ð¼Ñ–Ñ‚Ð¸Ð»Ð¸, Ñ‰Ð¾ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð» Ð²ÑÐµ Ñ‰Ðµ Ð½Ðµ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ñ‚Ð¾Ñ‡Ð½Ð¾ Ñ‚Ð°Ðº, ÑÐº Ð½Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾. ÐÐ°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð² ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ñ–Ñ— Ð· Ð´Ð²Ð¾Ð¼Ð° Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°Ð¼Ð¸, ÐºÐ¾Ð»Ð¸ Ð²ÑÑ– Ð½ÐµÐ¿Ð°Ñ€Ð½Ñ– Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð²Ð°Ð¶ÐºÑ–, Ð° Ð¿Ð°Ñ€Ð½Ñ– - Ð»ÐµÐ³ÐºÑ–, Ð¾Ð´Ð¸Ð½ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸Ðº Ð±ÑƒÐ´Ðµ Ð¿Ð¾ÑÑ‚Ñ–Ð¹Ð½Ð¾ Ð·Ð°Ð¹Ð½ÑÑ‚Ð¸Ð¹, Ð° Ñ–Ð½ÑˆÐ¸Ð¹ Ð¼Ð°Ð»Ð¾ Ñ‰Ð¾ Ð±ÑƒÐ´Ðµ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸. ÐÑƒ, RabbitMQ Ð½Ñ–Ñ‡Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ Ñ†Ðµ Ð½Ðµ Ð·Ð½Ð°Ñ” Ñ– Ð²ÑÐµ Ñ‰Ðµ Ð±ÑƒÐ´Ðµ Ñ€Ð¾Ð·Ð¿Ð¾Ð´Ñ–Ð»ÑÑ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ€Ñ–Ð²Ð½Ð¾Ð¼Ñ–Ñ€Ð½Ð¾.

Ð¦Ðµ Ñ‚Ñ€Ð°Ð¿Ð»ÑÑ”Ñ‚ÑŒÑÑ Ñ‡ÐµÑ€ÐµÐ· Ñ‚Ðµ, Ñ‰Ð¾ RabbitMQ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ€Ð¾Ð·ÑÐ¸Ð»Ð°Ñ” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ, ÐºÐ¾Ð»Ð¸ Ð²Ð¾Ð½Ð¸ Ð¿Ð¾Ñ‚Ñ€Ð°Ð¿Ð»ÑÑŽÑ‚ÑŒ Ð² Ñ‡ÐµÑ€Ð³Ñƒ. Ð’Ñ–Ð½ Ð½Ðµ Ð´Ð¸Ð²Ð¸Ñ‚ÑŒÑÑ Ð½Ð° ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð½ÐµÐ¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð¸Ñ… Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ Ð´Ð»Ñ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°. Ð’Ñ–Ð½ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÑÐ»Ñ–Ð¿Ð¾ Ñ€Ð¾Ð·ÑÐ¸Ð»Ð°Ñ” ÐºÐ¾Ð¶Ð½Ðµ n-Ñ‚Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð´Ð¾ n-Ð³Ð¾ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C1((Câ‚))
    C2((Câ‚‚))

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style Q fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style C1 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px
    style C2 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px

    P-->Q-->|Prefetch=1|C1
    Q-->|Prefetch=1|C2
```

Ð”Ð»Ñ Ð·Ð¼Ñ–Ð½Ð¸ Ñ†ÑŒÐ¾Ð³Ð¾ Ð¿Ð¾Ð²ÐµÐ´Ñ–Ð½ÐºÐ¸ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ð¼ÐµÑ‚Ð¾Ð´ `BasicQos` Ð· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð¼ `prefetchCount` = `1`. Ð¦Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÑÑ” RabbitMQ Ð½Ðµ Ð´Ð°Ð²Ð°Ñ‚Ð¸ Ð±Ñ–Ð»ÑŒÑˆÐµ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑƒ Ð¾Ð´Ð½Ð¾Ñ‡Ð°ÑÐ½Ð¾. Ð†Ð½ÑˆÐ¸Ð¼Ð¸ ÑÐ»Ð¾Ð²Ð°Ð¼Ð¸, Ð½Ðµ Ñ€Ð¾Ð·ÑÐ¸Ð»Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑƒ, Ð¿Ð¾ÐºÐ¸ Ð²Ñ–Ð½ Ð½Ðµ Ð¾Ð±Ñ€Ð¾Ð±Ð¸Ñ‚ÑŒ Ñ– Ð½Ðµ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ”. Ð—Ð°Ð¼Ñ–ÑÑ‚ÑŒ Ñ†ÑŒÐ¾Ð³Ð¾ Ð²Ð¾Ð½Ð¾ Ð±ÑƒÐ´Ðµ Ñ€Ð¾Ð·ÑÐ¸Ð»ÑÑ‚Ð¸ÑÑ Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð¾Ð¼Ñƒ Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑƒ, ÑÐºÐ¸Ð¹ Ñ‰Ðµ Ð½Ðµ Ð·Ð°Ð¹Ð½ÑÑ‚Ð¸Ð¹.

ÐŸÑ–ÑÐ»Ñ Ñ–ÑÐ½ÑƒÑŽÑ‡Ð¾Ð³Ð¾ Ð²Ð¸ÐºÐ»Ð¸ÐºÑƒ ***QueueDeclare*** Ð² ***Worker.cs*** Ð´Ð¾Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¸ÐºÐ»Ð¸Ðº `BasicQos`:

```cs
channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

channel.BasicQos(prefetchSize: 0, prefetchCount: 1, global: false);
```

> **ÐŸÑ€Ð¸Ð¼Ñ–Ñ‚ÐºÐ° Ñ‰Ð¾Ð´Ð¾ Ñ€Ð¾Ð·Ð¼Ñ–Ñ€Ñƒ Ñ‡ÐµÑ€Ð³Ð¸**
> Ð¯ÐºÑ‰Ð¾ Ð²ÑÑ– Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ¸ Ð·Ð°Ð¹Ð½ÑÑ‚Ñ–, Ð²Ð°ÑˆÐ° Ñ‡ÐµÑ€Ð³Ð° Ð¼Ð¾Ð¶Ðµ Ð·Ð°Ð¿Ð¾Ð²Ð½Ð¸Ñ‚Ð¸ÑÑ. Ð’Ð°Ð¼ ÑÐ»Ñ–Ð´ ÑÐ»Ñ–Ð´ÐºÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð° Ñ†Ð¸Ð¼ Ñ–, Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾, Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ñ‰Ðµ Ð´ÐµÑÐºÐ¸Ñ… Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÑ–Ð² Ð°Ð±Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ñ–Ð½ÑˆÑƒ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ñ–ÑŽ.

## ÐŸÐ¾Ñ”Ð´Ð½Ð°Ñ”Ð¼Ð¾ Ð²ÑÐµ Ñ€Ð°Ð·Ð¾Ð¼

Ð’Ñ–Ð´ÐºÑ€Ð¸Ð¹Ñ‚Ðµ Ð´Ð²Ð° Ñ‚ÐµÑ€Ð¼Ñ–Ð½Ð°Ð»Ð¸.

Ð¡Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð·Ð°Ð¿ÑƒÑÑ‚Ñ–Ñ‚ÑŒ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð° (Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°), Ñ‰Ð¾Ð± Ñ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð³Ñ–Ñ (Ð¿ÐµÑ€ÐµÐ²Ð°Ð¶Ð½Ð¾ Ñ‡ÐµÑ€Ð³Ð°) Ð±ÑƒÐ»Ð° Ð½Ð° Ð¼Ñ–ÑÑ†Ñ–. ÐžÑÑŒ Ð¹Ð¾Ð³Ð¾ Ð¿Ð¾Ð²Ð½Ð¸Ð¹ ÐºÐ¾Ð´:

```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

channel.BasicQos(prefetchSize: 0, prefetchCount: 1, global: false);

Console.WriteLine(" [*] Waiting for messages.");

var consumer = new EventingBasicConsumer(channel);
consumer.Received += (model, ea) =>
{
    byte[] body = ea.Body.ToArray();
    var message = Encoding.UTF8.GetString(body);
    Console.WriteLine($" [x] Received {message}");

    int dots = message.Split('.').Length - 1;
    Thread.Sleep(dots * 1000);

    Console.WriteLine(" [x] Done");

    // here channel could also be accessed as ((EventingBasicConsumer)sender).Model
    channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false);
};
channel.BasicConsume(queue: "task_queue",
                     autoAck: false,
                     consumer: consumer);

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

Ð¢ÐµÐ¿ÐµÑ€ Ð·Ð°Ð¿ÑƒÑÑ‚Ñ–Ñ‚ÑŒ Ð²Ð¸Ð´Ð°Ð²Ñ†Ñ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ (NewTask). ÐžÑÑŒ Ð¹Ð¾Ð³Ð¾ ÐºÑ–Ð½Ñ†ÐµÐ²Ð¸Ð¹ ÐºÐ¾Ð´:

```cs
using System.Text;
using RabbitMQ.Client;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

var message = GetMessage(args);
var body = Encoding.UTF8.GetBytes(message);

var properties = channel.CreateBasicProperties();
properties.Persistent = true;

channel.BasicPublish(exchange: string.Empty,
                     routingKey: "task_queue",
                     basicProperties: properties,
                     body: body);
Console.WriteLine($" [x] Sent {message}");

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();

static string GetMessage(string[] args)
{
    return ((args.Length > 0) ? string.Join(" ", args) : "Hello World!");
}
```

[(Ð’Ð¸Ñ…Ñ–Ð´Ð½Ð¸Ð¹ ÐºÐ¾Ð´ NewTask.cs)](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/NewTask/NewTask.cs)

Ð— Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½ÑÐ¼ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½ÑŒ Ñ‚Ð° `BasicQos` Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸ Ñ‡ÐµÑ€Ð³Ñƒ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ. ÐžÐ¿Ñ†Ñ–Ñ— ÑÑ‚Ñ–Ð¹ÐºÐ¾ÑÑ‚Ñ– Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚ÑŒ Ð·Ð°Ð²Ð´Ð°Ð½Ð½ÑÐ¼ Ð²Ð¸Ð¶Ð¸Ð²Ð°Ñ‚Ð¸ Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐºÑ‰Ð¾ RabbitMQ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ñ‚ÑŒÑÑ.

Ð”Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð´Ð¾Ð´Ð°Ñ‚ÐºÐ¾Ð²Ð¾Ñ— Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ— Ð¿Ñ€Ð¾ Ð¼ÐµÑ‚Ð¾Ð´Ð¸ `IModel` Ñ‚Ð° `IBasicProperties` Ð²Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ð¸ [Ð´Ð¾Ð²Ñ–Ð´ÐºÑƒ Ð¿Ð¾ API .NET ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð° RabbitMQ](https://rabbitmq.github.io/rabbitmq-dotnet-client/api/RabbitMQ.Client.html) Ð² Ð†Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñ–.

Ð¢ÐµÐ¿ÐµÑ€ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð´Ð¾ Ñ‚Ñ€ÐµÑ‚ÑŒÐ¾Ð³Ð¾ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸ÐºÐ° Ñ‚Ð° Ð´Ñ–Ð·Ð½Ð°Ñ‚Ð¸ÑÑ, ÑÐº Ð´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚Ð¸ Ð¾Ð´Ð½Ðµ Ð¹ Ñ‚Ðµ Ð¶ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ ÐºÑ–Ð»ÑŒÐºÐ¾Ð¼ ÑÐ¿Ð¾Ð¶Ð¸Ð²Ð°Ñ‡Ð°Ð¼.

# ÐÐ°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð· RabbitMQ - ÐŸÑƒÐ±Ð»Ñ–ÐºÐ°Ñ†Ñ–Ñ/ÐŸÑ–Ð´Ð¿Ð¸ÑÐºÐ°
## ÐŸÑƒÐ±Ð»Ñ–ÐºÐ°Ñ†Ñ–Ñ/ÐŸÑ–Ð´Ð¿Ð¸ÑÐºÐ°

> [!NOTE]  
> **ÐŸÐ¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸**  
>
> Ð¦ÐµÐ¹ Ð½Ð°Ð²Ñ‡Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ–Ð±Ð½Ð¸Ðº Ð¿ÐµÑ€ÐµÐ´Ð±Ð°Ñ‡Ð°Ñ”, Ñ‰Ð¾ RabbitMQ Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ– Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð½Ð° `localhost` Ð·Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¸Ð¼ Ð¿Ð¾Ñ€Ñ‚Ð¾Ð¼ (5672). Ð£ Ñ€Ð°Ð·Ñ– Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ð½Ð½Ñ Ñ–Ð½ÑˆÐ¾Ð³Ð¾ Ñ…Ð¾ÑÑ‚Ñƒ, Ð¿Ð¾Ñ€Ñ‚Ñƒ Ð°Ð±Ð¾ Ð¾Ð±Ð»Ñ–ÐºÐ¾Ð²Ð¸Ñ… Ð´Ð°Ð½Ð¸Ñ…, Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð±ÑƒÐ´Ðµ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ.

```mermaid
flowchart LR;
    P((P))
    X{{X}}
    Q1[[Queue_name]]
    Q2[[Queue_name]]
    

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style X fill:#FF006E, stroke:#A0A0A0,stroke-width:2px
    style Q1 fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style Q2 fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    

    P-->X-->Q1
    X-->Q2
```