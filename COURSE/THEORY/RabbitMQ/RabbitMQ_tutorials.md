[`üè† HOME`](../../README.md)  

[`üìò RabbitMQ THEORY`](./README.md) 

# –ù–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ RabbitMQ - "Hello World!"

## –í—Å—Ç—É–ø

> [!NOTE]  
> **–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏**  
>
> –¶–µ–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ RabbitMQ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —ñ –ø—Ä–∞—Ü—é—î –Ω–∞ `localhost` –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –ø–æ—Ä—Ç–æ–º (5672). –£ —Ä–∞–∑—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—à–æ–≥–æ —Ö–æ—Å—Ç—É, –ø–æ—Ä—Ç—É –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö, –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

RabbitMQ - —Ü–µ –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å: –≤—ñ–Ω –ø—Ä–∏–π–º–∞—î —Ç–∞ –ø–µ—Ä–µ—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –í–∏ –º–æ–∂–µ—Ç–µ —É—è–≤–∏—Ç–∏ –π–æ–≥–æ —è–∫ –ø–æ—à—Ç–æ–≤–µ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è: –∫–æ–ª–∏ –≤–∏ –∫–ª–∞–¥–µ—Ç–µ –ª–∏—Å—Ç —É –ø–æ—à—Ç–æ–≤—É —Å–∫—Ä–∏–Ω—å–∫—É, –≤–∏ –º–æ–∂–µ—Ç–µ –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ –ø–æ—à—Ç–∞—Ä —Ä–∞–Ω–æ —á–∏ –ø—ñ–∑–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∏—Å—Ç–∞ –≤–∞—à–æ–º—É –æ–¥–µ—Ä–∂—É–≤–∞—á–µ–≤—ñ. –£ —Ü—ñ–π –∞–Ω–∞–ª–æ–≥—ñ—ó RabbitMQ - —Ü–µ –ø–æ—à—Ç–æ–≤–∞ —Å–∫—Ä–∏–Ω—å–∫–∞, –ø–æ—à—Ç–æ–≤–µ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è —Ç–∞ –ø–æ—à—Ç–∞—Ä.

–û—Å–Ω–æ–≤–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ RabbitMQ —Ç–∞ –ø–æ—à—Ç–æ–≤–∏–º –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è–º –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ RabbitMQ –Ω–µ –ø—Ä–∞—Ü—é—î –∑ –ø–∞–ø–µ—Ä–æ–≤–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤—ñ–Ω –ø—Ä–∏–π–º–∞—î, –∑–±–µ—Ä—ñ–≥–∞—î —Ç–∞ –ø–µ—Ä–µ—Å–∏–ª–∞—î –±—ñ–Ω–∞—Ä–Ω—ñ –±–ª–æ–±–∏ –¥–∞–Ω–∏—Ö - *–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è*.

RabbitMQ, —Ç–∞–∫ —Å–∞–º–æ —è–∫ —ñ –≤–∑–∞–≥–∞–ª—ñ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–µ–≤–Ω–∏–π –∂–∞—Ä–≥–æ–Ω.

‚Ä¢ ***–ü—Ä–æ–¥—É–∫—É–≤–∞–Ω–Ω—è*** (Producing) –æ–∑–Ω–∞—á–∞—î –Ω–µ —â–æ —ñ–Ω—à–µ, —è–∫ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è. –ü—Ä–æ–≥—Ä–∞–º–∞, —è–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, - —Ü–µ ***–ø—Ä–æ–¥—é—Å–µ—Ä***.

```mermaid
flowchart LR;
    P((P))
    
    style P fill:#0094FF, stroke:#FFFFFF,stroke-width:2px
    
    P
```

‚Ä¢ ***–ß–µ—Ä–≥–∞*** - —Ü–µ –Ω–∞–∑–≤–∞ –¥–ª—è –ø–æ—à—Ç–æ–≤–æ—ó —Å–∫—Ä–∏–Ω—å–∫–∏ –≤ RabbitMQ. –•–æ—á–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ RabbitMQ —Ç–∞ –≤–∞—à—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ª–∏—à–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ ***—á–µ—Ä–≥–∏***. ***–ß–µ—Ä–≥–∞*** –æ–±–º–µ–∂—É—î—Ç—å—Å—è –ª–∏—à–µ –æ–±—Å—è–≥–∞–º–∏ –ø–∞–º'—è—Ç—ñ —Ç–∞ –¥–∏—Å–∫–∞ —Ö–æ—Å—Ç–∞, —ñ, –ø–æ —Å—É—Ç—ñ, —Ü–µ –≤–µ–ª–∏–∫–∏–π –±—É—Ñ–µ—Ä –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

–ë–∞–≥–∞—Ç–æ ***–ø—Ä–æ–¥—é—Å–µ—Ä—ñ–≤*** –º–æ–∂—É—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—ñ –π–¥—É—Ç—å –≤ –æ–¥–Ω—É —á–µ—Ä–≥—É, —ñ –±–∞–≥–∞—Ç–æ ***—Å–ø–æ–∂–∏–≤–∞—á—ñ–≤*** –º–æ–∂—É—Ç—å –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∑ –æ–¥–Ω—ñ—î—ó —á–µ—Ä–≥–∏.

–û—Å—å —è–∫ –º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î–º–æ —á–µ—Ä–≥—É:

```mermaid
flowchart LR;
    Q[[Queue_name]]

    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px

    Q
```

‚Ä¢ ***–°–ø–æ–∂–∏–≤–∞–Ω–Ω—è*** –º–∞—î —Å—Ö–æ–∂–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º. ***–°–ø–æ–∂–∏–≤–∞—á*** - —Ü–µ –ø—Ä–æ–≥—Ä–∞–º–∞, —è–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –æ—á—ñ–∫—É—î –Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

```mermaid
flowchart LR;
    C((C))

    style C fill:#00FF21, stroke:#FFFFFF,stroke-width:2px

    C
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∏—Ä–æ–±–Ω–∏–∫, —Å–ø–æ–∂–∏–≤–∞—á —ñ –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ–≤–∏–Ω–Ω—ñ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏—Å—è –Ω–∞ –æ–¥–Ω–æ–º—É —Ö–æ—Å—Ç—ñ; –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ, –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ –ø—Ä–æ–≥—Ä–∞–º –≤–æ–Ω–∏ —Ü—å–æ–≥–æ –Ω–µ —Ä–æ–±–ª—è—Ç—å. –ê –¥–æ–¥–∞—Ç–æ–∫ –º–æ–∂–µ –±—É—Ç–∏ –æ–±–æ–º–∞ —è–∫ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º —Ç–∞–∫ —ñ —Å–ø–æ–∂–∏–≤–∞—á–µ–º.

## "Hello World"

–£ —Ü—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –ø–æ—Å—ñ–±–Ω–∏–∫–∞ –º–∏ –Ω–∞–ø–∏—à–µ–º–æ –¥–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –Ω–∞ C#: –ø—Ä–æ–¥—é—Å–µ—Ä–∞, —è–∫–∏–π –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —ñ —Å–ø–æ–∂–∏–≤–∞—á–∞, —è–∫–∏–π –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –≤–∏–≤–æ–¥–∏—Ç—å —ó—Ö. –ú–∏ –æ–±—ñ–π–¥–µ–º–æ –¥–µ—è–∫—ñ –¥–µ—Ç–∞–ª—ñ —É .NET-–∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–º—É API, –∑–æ—Å–µ—Ä–µ–¥–∂—É—é—á–∏—Å—å –Ω–∞ —Ü—ñ–π –¥—É–∂–µ –ø—Ä–æ—Å—Ç—ñ–π —Ä–µ—á—ñ, —â–æ–± –ø—Ä–∏—Å—Ç—É–ø–∏—Ç–∏ –¥–æ —Ä–æ–±–æ—Ç–∏. –¶–µ "Hello World" —É —Å–≤—ñ—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

–ù–∞ –¥—ñ–∞–≥—Ä–∞–º—ñ –Ω–∏–∂—á–µ "P" - —Ü–µ –Ω–∞—à –ø—Ä–æ–¥—é—Å–µ—Ä, –∞ "C" - –Ω–∞—à —Å–ø–æ–∂–∏–≤–∞—á. –ö–≤–∞–¥—Ä–∞—Ç —É —Å–µ—Ä–µ–¥–∏–Ω—ñ - —Ü–µ —á–µ—Ä–≥–∞ - –±—É—Ñ–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, —è–∫–∏–π RabbitMQ –∑–±–µ—Ä—ñ–≥–∞—î –≤—ñ–¥ —ñ–º–µ–Ω—ñ —Å–ø–æ–∂–∏–≤–∞—á–∞.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C((C))

    style P fill:#007ACC, stroke:#FFFFFF,stroke-width:2px
    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px
    style C fill:#009E0A, stroke:#FFFFFF,stroke-width:2px

    P-->Q-->C
```

> **The .NET client library**
>
> RabbitMQ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤. –£ —Ü—å–æ–º—É –Ω–∞–≤—á–∞–ª—å–Ω–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è AMQP 0-9-1, —è–∫–∏–π —î –≤—ñ–¥–∫—Ä–∏—Ç–∏–º, –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –¥–ª—è –æ–±–º—ñ–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏. –Ü—Å–Ω—É—î –∫—ñ–ª—å–∫–∞ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –¥–ª—è RabbitMQ –Ω–∞ –±–∞–≥–∞—Ç—å–æ—Ö —Ä—ñ–∑–Ω–∏—Ö –º–æ–≤–∞—Ö –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è. –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ–º–æ .NET-–∫–ª—ñ—î–Ω—Ç, —è–∫–∏–π –Ω–∞–¥–∞—î—Ç—å—Å—è RabbitMQ.
>
> –¶–µ–π –∫–ª—ñ—î–Ω—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î .NET Core, –∞ —Ç–∞–∫–æ–∂ .NET Framework 4.5.1+. –£ —Ü—å–æ–º—É –Ω–∞–≤—á–∞–ª—å–Ω–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ RabbitMQ .NET-–∫–ª—ñ—î–Ω—Ç –≤–µ—Ä—Å—ñ—ó 5.0 —Ç–∞ .NET Core, —Ç–æ–º—É –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –π–æ–≥–æ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —ñ –≤–∫–∞–∑–∞–ª–∏ –≤ —Å–≤—ñ–π —à–ª—è—Ö.
> 
> –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ .NET Framework –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ –Ω–∞–≤—á–∞–ª—å–Ω–æ–≥–æ –ø–æ—Å—ñ–±–Ω–∏–∫–∞, –æ–¥–Ω–∞–∫ –∫—Ä–æ–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—É–¥—É—Ç—å —ñ–Ω—à–∏–º–∏.
>
> RabbitMQ .NET-–∫–ª—ñ—î–Ω—Ç –≤–µ—Ä—Å—ñ—ó 5.0 —Ç–∞ –ø—ñ–∑–Ω—ñ—à–∏—Ö –≤–µ—Ä—Å—ñ–π —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ NuGet.
> 
> –¶–µ–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ PowerShell –Ω–∞ Windows. –ù–∞ MacOS —Ç–∞ Linux –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω–æ –±—É–¥—å-—è–∫–∞ –æ–±–æ–ª–æ–Ω–∫–∞.

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å —î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä .NET Core —É –≤–∞—à–æ–º—É `PATH`.

```powershell
dotnet --help
```

–î–æ–¥–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É, —â–æ–± –≤–æ–Ω–∞ –≤–∏–≤–µ–ª–∞ –¥–æ–≤—ñ–¥–∫–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

–¢–µ–ø–µ—Ä –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏: –æ–¥–∏–Ω –¥–ª—è –≤–∏—Ä–æ–±–Ω–∏–∫–∞ —Ç–∞ –æ–¥–∏–Ω –¥–ª—è —Å–ø–æ–∂–∏–≤–∞—á–∞.

```powershell
dotnet new console --name Send
mv Send/Program.cs Send/Send.cs
dotnet new console --name Receive
mv Receive/Program.cs Receive/Receive.cs
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å –¥–≤—ñ –Ω–æ–≤—ñ —Ç–µ–∫–∏ –∑ –Ω–∞–∑–≤–∞–º–∏ `Send` —Ç–∞ `Receive`.

–ü–æ—Ç—ñ–º –º–∏ –¥–æ–¥–∞—î–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞.

```powershell
cd Send
dotnet add package RabbitMQ.Client
cd ../Receive
dotnet add package RabbitMQ.Client
```

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —É –Ω–∞—Å –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç .NET, –º–∏ –º–æ–∂–µ–º–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ –¥–µ—è–∫–∏–π –∫–æ–¥.

## –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]

    style P fill:#0094FF, stroke:#FFFFFF,stroke-width:2px
    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px

    P-->Q
```

–ú–∏ –Ω–∞–∑–∏–≤–∞—î–º–æ –Ω–∞—à –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–≤–∏—Ä–æ–±–Ω–∏–∫) `Send.cs`, –∞ –æ—Ç—Ä–∏–º—É–≤–∞—á –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (—Å–ø–æ–∂–∏–≤–∞—á) `Receive.cs`. –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –±—É–¥–µ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è –¥–æ RabbitMQ, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∞ –ø–æ—Ç—ñ–º –∑–∞–≤–µ—Ä—à—É–≤–∞—Ç–∏ —Ä–æ–±–æ—Ç—É.

–£ —Ñ–∞–π–ª—ñ `Send.cs`(https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Send/Send.cs) –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–µ—è–∫—ñ –ø—Ä–æ—Å—Ç–æ—Ä–∏ —ñ–º–µ–Ω:

```cs
using System.Text;
using RabbitMQ.Client;
```

–ü–æ—Ç—ñ–º –º–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º:

```cs
var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();
...
```

–ó'—î–¥–Ω–∞–Ω–Ω—è –∞–±—Å—Ç—Ä–∞–≥—É—î –∑'—î–¥–Ω–∞–Ω–Ω—è —Å–æ–∫–µ—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∏ —â–æ–¥–æ –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ—Ç–æ–∫–æ–ª—É, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–æ—â–æ –∑–∞ –Ω–∞—Å. –¢—É—Ç –º–∏ –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ—Å—å –¥–æ –≤—É–∑–ª–∞ RabbitMQ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ - —Ç–æ–±—Ç–æ localhost. –Ø–∫—â–æ –º–∏ —Ö–æ—á–µ–º–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –¥–æ –≤—É–∑–ª–∞ –Ω–∞ —ñ–Ω—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ, –ø—Ä–æ—Å—Ç–æ –≤–∫–∞–∂–µ–º–æ –π–æ–≥–æ —ñ–º'—è —Ö–æ—Å—Ç–∞ –∞–±–æ IP-–∞–¥—Ä–µ—Å—É —Ç—É—Ç.

–î–∞–ª—ñ –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–∞–Ω–∞–ª, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –±—ñ–ª—å—à—ñ—Å—Ç—å API –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å.

–©–æ–± –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ —á–µ—Ä–≥—É, –¥–æ —è–∫–æ—ó –º–∏ —Ö–æ—á–µ–º–æ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è; –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–∏ –º–æ–∂–µ–º–æ –æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É —á–µ—Ä–≥—É:

```cs
using System.Text;
using RabbitMQ.Client;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

const string message = "Hello World!";
var body = Encoding.UTF8.GetBytes(message);

channel.BasicPublish(exchange: string.Empty,
                     routingKey: "hello",
                     basicProperties: null,
                     body: body);
Console.WriteLine($" [x] Sent {message}");

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

–û–≥–æ–ª–æ—à–µ–Ω–Ω—è —á–µ—Ä–≥–∏ —î —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º - –≤–æ–Ω–æ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ –ª–∏—à–µ —É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ –≤–æ–Ω–∞ —â–µ –Ω–µ —ñ—Å–Ω—É—î. –í–º—ñ—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è - —Ü–µ –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –∫–æ–¥—É–≤–∞—Ç–∏ —Ç–∞–º –≤—Å–µ, —â–æ –∑–∞–≤–≥–æ–¥–Ω–æ.

–ö–æ–ª–∏ –∫–æ–¥ –≤–∏—â–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–≤–æ—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –∫–∞–Ω–∞–ª —ñ –∑'—î–¥–Ω–∞–Ω–Ω—è –±—É–¥—É—Ç—å –∑–∞–∫—Ä–∏—Ç—ñ. –¶–µ –≤—Å–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –Ω–∞—à–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞.

[–û—Å—å –≤–µ—Å—å –∫–ª–∞—Å Send.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Send/Send.cs)

> **–ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î!**
>
> –Ø–∫—â–æ —Ü–µ –≤–∞—à –ø–µ—Ä—à–∏–π —Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è RabbitMQ, —ñ –≤–∏ –Ω–µ –±–∞—á–∏—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "Sent", —Ç–æ –≤–∏, –º–æ–∂–ª–∏–≤–æ, –∑–∞–ª–∏—à–∏–ª–∏—Å—å –∑ –ø–∏—Ç–∞–Ω–Ω—è–º, —â–æ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ —Ç–∞–∫. –ú–æ–∂–ª–∏–≤–æ, –±—Ä–æ–∫–µ—Ä –±—É–≤ –∑–∞–ø—É—â–µ–Ω–∏–π –±–µ–∑ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ—ó –≤—ñ–ª—å–Ω–æ—ó –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 50 –ú–ë –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è) —ñ, –æ—Ç–∂–µ, –≤—ñ–¥–º–æ–≤–ª—è—î—Ç—å—Å—è –ø—Ä–∏–π–º–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∂—É—Ä–Ω–∞–ª –±—Ä–æ–∫–µ—Ä–∞ –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ü—å–æ–≥–æ —ñ, –∑–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ, –∑–º–µ–Ω—à—Ç–µ –ª—ñ–º—ñ—Ç. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–∫–∞–∂–µ –≤–∞–º, —è–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `disk_free_limit`.

## –û—Ç—Ä–∏–º–∞–Ω–Ω—è

–©–æ –∂ –¥–æ —Å–ø–æ–∂–∏–≤–∞—á–∞, –≤—ñ–Ω —Å–ª—É—Ö–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ RabbitMQ. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –ø—Ä–æ–¥—é—Å–µ—Ä–∞, —è–∫–∏–π –ø—É–±–ª—ñ–∫—É—î –æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –º–∏ –±—É–¥–µ–º–æ —Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–æ–∂–∏–≤–∞—á–∞ –ø–æ—Å—Ç—ñ–π–Ω–æ –ø—Ä–∞—Ü—é—é—á–∏–º, —â–æ–± –≤—ñ–Ω —Å–ª—É—Ö–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –≤–∏–≤–æ–¥–∏–≤ —ó—Ö.

```mermaid
flowchart LR;
    Q[[Queue_name]]
    C((C))

    style Q fill:#CC4E00, stroke:#FFFFFF,stroke-width:2px
    style C fill:#00FF21, stroke:#FFFFFF,stroke-width:2px

    Q-->C
```

–ö–æ–¥ (—É —Ñ–∞–π–ª—ñ [Receive.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Receive/Receive.cs)) –º–∞—î –º–∞–π–∂–µ —Ç—ñ –∂ —Å–∞–º—ñ –±–ª–æ–∫–∏ –∫–æ–¥—É `using`, —â–æ –π —É `Send`:
```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;
```

–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫—É; –º–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è —ñ –∫–∞–Ω–∞–ª, —Ç–∞ –æ–≥–æ–ª–æ—à—É—î–º–æ —á–µ—Ä–≥—É, –∑ —è–∫–æ—ó –º–∏ –±—É–¥–µ–º–æ —Å–ø–æ–∂–∏–≤–∞—Ç–∏. –ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —Ü–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —á–µ—Ä–∑—ñ, –Ω–∞ —è–∫—É –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `Send`.

```cs
var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);
...
```

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –º–∏ —Ç–∞–∫–æ–∂ –æ–≥–æ–ª–æ—à—É—î–º–æ —á–µ—Ä–≥—É —Ç—É—Ç. –û—Å–∫—ñ–ª—å–∫–∏ –º–∏ –º–æ–∂–µ–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–ø–æ–∂–∏–≤–∞—á–∞ –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–æ–º, –º–∏ —Ö–æ—á–µ–º–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —á–µ—Ä–≥–∞ —ñ—Å–Ω—É—î, –ø–µ—Ä—à –Ω—ñ–∂ –º–∏ —Å–ø—Ä–æ–±—É—î–º–æ —Å–ø–æ–∂–∏–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –Ω–µ—ó.

–ú–∏ –∑–±–∏—Ä–∞—î–º–æ—Å—è –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä, —â–æ–± –≤—ñ–Ω –¥–æ—Å—Ç–∞–≤–∏–≤ –Ω–∞–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —á–µ—Ä–≥–∏. –û—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –Ω–∞–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –º–∏ –Ω–∞–¥–∞—î–º–æ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫. –¶–µ —Ç–µ, —â–æ —Ä–æ–±–∏—Ç—å –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π `EventingBasicConsumer.Received`.

```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "hello",
                     durable: false,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

Console.WriteLine(" [*] Waiting for messages.");

var consumer = new EventingBasicConsumer(channel);
consumer.Received += (model, ea) =>
{
    var body = ea.Body.ToArray();
    var message = Encoding.UTF8.GetString(body);
    Console.WriteLine($" [x] Received {message}");
};
channel.BasicConsume(queue: "hello",
                     autoAck: true,
                     consumer: consumer);

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

[–û—Å—å –≤–µ—Å—å –∫–ª–∞—Å Receive.cs](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/Receive/Receive.cs):

## –û–±'—î–¥–Ω–∞–π–º–æ –≤—Å–µ —Ä–∞–∑–æ–º.
–í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–≤–∞ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞.

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∏ —É –±—É–¥—å-—è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É, –æ—Å–∫—ñ–ª—å–∫–∏ –æ–±–∏–¥–≤–∞ –æ–≥–æ–ª–æ—à—É—é—Ç—å —á–µ—Ä–≥—É. –ú–∏ —Å–ø–æ—á–∞—Ç–∫—É –∑–∞–ø—É—Å—Ç–∏–º–æ —Å–ø–æ–∂–∏–≤–∞—á–∞, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –ø–æ–±–∞—á–∏—Ç–∏, —è–∫ –≤—ñ–Ω –æ—á—ñ–∫—É—î —Ç–∞ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
```powershell
cd Receive
dotnet run
```

–î–∞–ª—ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–¥—é—Å–µ—Ä–∞.

```powershell
cd Send
dotnet run
```

–°–ø–æ–∂–∏–≤–∞—á —Ä–æ–∑–¥—Ä—É–∫—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫–µ –≤—ñ–Ω –æ—Ç—Ä–∏–º–∞—î –≤—ñ–¥ –≤–∏—Ä–æ–±–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ RabbitMQ. –°–ø–æ–∂–∏–≤–∞—á –±—É–¥–µ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, –æ—á—ñ–∫—É—é—á–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, —Ç–æ–º—É —Å–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤–∏—Ä–æ–±–Ω–∏–∫–∞ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤.

–ß–∞—Å –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –¥—Ä—É–≥–æ—ó —á–∞—Å—Ç–∏–Ω–∏ —ñ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç—É —Ä–æ–±–æ—á—É —á–µ—Ä–≥—É.

---

# –ù–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ RabbitMQ - –†–æ–±–æ—á—ñ –ß–µ—Ä–≥–∏
## –†–æ–±–æ—á—ñ –ß–µ—Ä–≥–∏

> [!NOTE]  
> **–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏**  
>
> –¶–µ–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ RabbitMQ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —ñ –ø—Ä–∞—Ü—é—î –Ω–∞ `localhost` –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –ø–æ—Ä—Ç–æ–º (5672). –£ —Ä–∞–∑—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—à–æ–≥–æ —Ö–æ—Å—Ç—É, –ø–æ—Ä—Ç—É –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö, –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C1((C‚ÇÅ))
    C2((C‚ÇÇ))

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style Q fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style C1 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px
    style C2 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px, color:#FF0000

    P-->Q-->C1
    Q-->C2
```

–£ –ø–µ—Ä—à–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –º–∏ –Ω–∞–ø–∏—Å–∞–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑ —ñ–º–µ–Ω–æ–≤–∞–Ω–æ—ó —á–µ—Ä–≥–∏. –£ —Ü—å–æ–º—É –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ ***–†–æ–±–æ—á—É –ß–µ—Ä–≥—É***, —è–∫–∞ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è —Ä–æ–∑–ø–æ–¥—ñ–ª—É —á–∞—Å–æ–º—ñ—Å—Ç–∫–∏—Ö –∑–∞–≤–¥–∞–Ω—å —Å–µ—Ä–µ–¥ –∫—ñ–ª—å–∫–æ—Ö —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤.

–û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è –∑–∞ –†–æ–±–æ—á–∏–º–∏ –ß–µ—Ä–≥–∞–º–∏ (—Ç–∞–∫–æ–∂ –≤—ñ–¥–æ–º–∏–º–∏ —è–∫: –ß–µ—Ä–≥–∏ –ó–∞–≤–¥–∞–Ω—å) –ø–æ–ª—è–≥–∞—î –≤ —É–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–æ—î–º–∫–∏—Ö –∑–∞–≤–¥–∞–Ω—å —ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—ñ —ó—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –º–∏ –ø–ª–∞–Ω—É—î–º–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ –ø—ñ–∑–Ω—ñ—à–∏–π —á–∞—Å. –ú–∏ —ñ–Ω–∫–∞–ø—Å—É–ª—é—î–º–æ ***–∑–∞–≤–¥–∞–Ω–Ω—è*** —É –≤–∏–≥–ª—è–¥—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î–º–æ –π–æ–≥–æ —É —á–µ—Ä–≥—É. –†–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å, —â–æ –ø—Ä–∞—Ü—é—î —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ, –≤–∏—Ç—è–≥–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ —á–µ—Ä–≥–∏ —Ç–∞ –≤ –∫—ñ–Ω—Ü–µ–≤–æ–º—É –ø—ñ–¥—Å—É–º–∫—É –≤–∏–∫–æ–Ω–∞—î –π–æ–≥–æ. –ö–æ–ª–∏ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –±–∞–≥–∞—Ç–æ —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤, –∑–∞–≤–¥–∞–Ω–Ω—è –±—É–¥–µ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–æ –º—ñ–∂ –Ω–∏–º–∏.

–¶—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è –æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–∞ –≤ –≤–µ–±-–¥–æ–¥–∞—Ç–∫–∞—Ö, –¥–µ –Ω–µ–º–æ–∂–ª–∏–≤–æ –æ–±—Ä–æ–±–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –ø—Ä–æ—Ç—è–≥–æ–º –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤—ñ–∫–Ω–∞ HTTP-–∑–∞–ø–∏—Ç—É.

## –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Ü—å–æ–≥–æ –ø–æ—Å—ñ–±–Ω–∏–∫–∞ –º–∏ –Ω–∞–¥—Å–∏–ª–∞–ª–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑—ñ —Å—Ç—Ä—ñ—á–∫–æ—é "Hello World!". –¢–µ–ø–µ—Ä –º–∏ –±—É–¥–µ–º–æ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Ä—è–¥–∫–∏, —è–∫—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è. –£ –Ω–∞—Å –Ω–µ–º–∞—î —Ä–µ–∞–ª—å–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º–µ–Ω—à–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∑–æ–±—Ä–∞–∂–µ–Ω—å –∞–±–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ PDF-—Ñ–∞–π–ª—ñ–≤, —Ç–æ–º—É –¥–∞–≤–∞–π—Ç–µ –≤–∏–≥–∞–¥–∞—î–º–æ, —â–æ –º–∏ –∑–∞–π–Ω—è—Ç—ñ - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ñ—É–Ω–∫—Ü—ñ—é `Thread.Sleep()` (–≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `using System.Threading;` –≤ —Å–∞–º–æ–º—É –ø–æ—á–∞—Ç–∫—É —Ñ–∞–π–ª—É, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ API-—Ñ—É–Ω–∫—Ü—ñ–π –ø–æ—Ç–æ–∫—ñ–≤). –ú–∏ –±—É–¥–µ–º–æ –≤–≤–∞–∂–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–∞–ø–æ–∫ —É —Ä—è–¥–∫—É –π–æ–≥–æ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—é; –∫–æ–∂–Ω–∞ –∫—Ä–∞–ø–∫–∞ –±—É–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –æ–¥–Ω—ñ–π —Å–µ–∫—É–Ω–¥—ñ "—Ä–æ–±–æ—Ç–∏". –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–≥–∞–¥–∞–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è, –æ–ø–∏—Å–∞–Ω–µ —Ä—è–¥–∫–æ–º `Hello...`, –∑–∞–π–º–µ —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥–∏.

–ú–∏ –Ω–µ–∑–Ω–∞—á–Ω–æ –∑–º—ñ–Ω–∏–º–æ –ø—Ä–æ–≥—Ä–∞–º—É ***Send*** –∑ –Ω–∞—à–æ–≥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É, —â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞. –¶—è –ø—Ä–æ–≥—Ä–∞–º–∞ –±—É–¥–µ –ø–ª–∞–Ω—É–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–æ –Ω–∞—à–æ—ó —Ä–æ–±–æ—á–æ—ó —á–µ—Ä–≥–∏, —Ç–æ–º—É –Ω–∞–∑–≤–µ–º–æ —ó—ó `NewTask`.

–Ø–∫ —ñ –≤ –ø–µ—Ä—à–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏.

```powershell
dotnet new console --name NewTask
mv NewTask/Program.cs NewTask/NewTask.cs
dotnet new console --name Worker
mv Worker/Program.cs Worker/Worker.cs
cd NewTask
dotnet add package RabbitMQ.Client
cd /docs/Worker
dotnet add package RabbitMQ.Client
```

–°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑—ñ —Å—Ç–∞—Ä–æ–≥–æ ***Send.cs*** –¥–æ ***NewTask.cs*** —Ç–∞ –≤–Ω–µ—Å—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–∏.

–û–Ω–æ–≤—ñ—Ç—å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –∑–º—ñ–Ω–Ω–æ—ó ***message***:

```cs
var message = GetMessage(args);
```

Add the ***GetMessage*** method to the end of the ***NewTask*** class:

```cs
static string GetMessage(string[] args)
{
    return ((args.Length > 0) ? string.Join(" ", args) : "Hello World!");
}
```

–ù–∞—à–æ–º—É —Å—Ç–∞—Ä–æ–º—É —Å–∫—Ä–∏–ø—Ç—É ***Receive.cs*** —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–µ—è–∫—ñ –∑–º—ñ–Ω–∏, —â–æ–± –≤–∏–≥–ª—è–¥–∞—Ç–∏ —è–∫ –æ–¥–Ω–∞ —Å–µ–∫—É–Ω–¥–∞ —Ä–æ–±–æ—Ç–∏ –Ω–∞ –∫–æ–∂–Ω—É –∫—Ä–∞–ø–∫—É –≤ —Ç—ñ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –í—ñ–Ω –±—É–¥–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ñ RabbitMQ, —Ç–∞ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è, —Ç–æ–º—É —Å–∫–æ–ø—ñ—é–π—Ç–µ –π–æ–≥–æ –¥–æ ***Worker.cs*** —Ç–∞ –≤–Ω–µ—Å—ñ—Ç—å –∑–º—ñ–Ω–∏, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –Ω–∏–∂—á–µ.

–ü—ñ—Å–ª—è –Ω–∞—à–æ–≥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ ***WriteLine*** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –¥–æ–¥–∞–π—Ç–µ —Ñ—ñ–∫—Ç–∏–≤–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ—ó —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:

```cs
Console.WriteLine($" [x] Received {message}");

int dots = message.Split('.').Length - 1;
Thread.Sleep(dots * 1000);

Console.WriteLine(" [x] Done");
```

# –î–∏—Å–ø–µ—Ç—á–∏—Ä–∏–∑–∞—Ü—ñ—è –∫—Ä—É–≥ –ø–æ –∫—Ä—É–≥—É (round-robin) 

–û–¥–Ω—ñ—î—é –∑ –ø–µ—Ä–µ–≤–∞–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ß–µ—Ä–≥–∏ –ó–∞–≤–¥–∞–Ω—å —î –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ª–µ–≥–∫–æ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑—É–≤–∞—Ç–∏ —Ä–æ–±–æ—Ç—É. –Ø–∫—â–æ —É –Ω–∞—Å –Ω–∞–∫–æ–ø–∏—á—É—î—Ç—å—Å—è –≤–µ–ª–∏–∫–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏, –º–∏ –º–æ–∂–µ–º–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ —ñ —Ç–∞–∫–∏–º —á–∏–Ω–æ–º –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É.

–°–ø–æ—á–∞—Ç–∫—É –¥–∞–≤–∞–π—Ç–µ —Å–ø—Ä–æ–±—É—î–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–≤–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ `Worker` –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –í–æ–Ω–∏ –æ–±–∏–¥–≤–∞ –æ—Ç—Ä–∏–º–∞—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —á–µ—Ä–≥–∏, –∞–ª–µ —è–∫ —Å–∞–º–µ —Ü–µ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è? –î–∞–≤–∞–π—Ç–µ –ø–æ–¥–∏–≤–∏–º–æ—Å—è.

–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ç—Ä–∏ –∫–æ–Ω—Å–æ–ª—ñ. –î–≤—ñ –∑ –Ω–∏—Ö –±—É–¥—É—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É `Worker`. –¶—ñ –∫–æ–Ω—Å–æ–ª—ñ –±—É–¥—É—Ç—å –Ω–∞—à–∏–º–∏ –¥–≤–æ–º–∞ —Å–ø–æ–∂–∏–≤–∞—á–∞–º–∏ - C1 —Ç–∞ C2.

```powershell
# shell 1
cd Worker
dotnet run
# => Press [enter] to exit.
```

```powershell
# shell 2
cd Worker
dotnet run
# => Press [enter] to exit.
```

–£ —Ç—Ä–µ—Ç—ñ–π –∫–æ–Ω—Å–æ–ª—ñ –º–∏ –±—É–¥–µ–º–æ –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è. –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–ø–æ–∂–∏–≤–∞—á—ñ–≤ –≤–∏ –º–æ–∂–µ—Ç–µ –æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:

```powershell
# shell 3
cd NewTask
dotnet run "First message."
dotnet run "Second message.."
dotnet run "Third message..."
dotnet run "Fourth message...."
dotnet run "Fifth message....."
```

–ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ, —â–æ –±—É–¥–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–æ –Ω–∞—à–∏—Ö —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤:

```powershell
# shell 1
# => Press [enter] to exit.
# => [x] Received First message.
# => [x] Done
# => [x] Received Third message...
# => [x] Done
# => [x] Received Fifth message.....
# => [x] Done
```

```powershell
# shell 2
# => Press [enter] to exit.
# => [x] Received Second message..
# => [x] Done
# => [x] Received Fourth message....
# => [x] Done
```

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º RabbitMQ –±—É–¥–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –∫–æ–∂–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Å–ø–æ–∂–∏–≤–∞—á—É —É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ. –£ —Å–µ—Ä–µ–¥–Ω—å–æ–º—É –∫–æ–∂–µ–Ω —Å–ø–æ–∂–∏–≤–∞—á –æ—Ç—Ä–∏–º–∞—î –æ–¥–Ω–∞–∫–æ–≤—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –¶–µ–π —Å–ø–æ—Å—ñ–± —Ä–æ–∑–ø–æ–¥—ñ–ª—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è "–∫—Ä—É–≥ –ø–æ –∫—Ä—É–≥—É". –°–ø—Ä–æ–±—É–π—Ç–µ —Ü–µ –∑ —Ç—Ä—å–æ–º–∞ –∞–±–æ –±—ñ–ª—å—à–µ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏.

## –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

–í–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥. –í–∏, –º–æ–∂–ª–∏–≤–æ, —Ü—ñ–∫–∞–≤–∏—Ç–µ—Å—å, —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –æ–¥–∏–Ω —ñ–∑ —Å–ø–æ–∂–∏–≤–∞—á—ñ–≤ –ø–æ—á–Ω–µ –¥–æ–≤–≥–µ –∑–∞–≤–¥–∞–Ω–Ω—è —ñ –ø–æ–º—Ä–µ, –∫–æ–ª–∏ –≤–æ–Ω–æ —â–µ –Ω–µ –±—É–¥–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ó–∞ –Ω–∞—à–∏–º –ø–æ—Ç–æ—á–Ω–∏–º –∫–æ–¥–æ–º, —è–∫ —Ç—ñ–ª—å–∫–∏ RabbitMQ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å–ø–æ–∂–∏–≤–∞—á—É, –≤—ñ–Ω –≤—ñ–¥—Ä–∞–∑—É –ø–æ–∑–Ω–∞—á–∞—î –π–æ–≥–æ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ –≤–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞, –º–∏ –≤—Ç—Ä–∞—Ç–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫–µ –≤—ñ–Ω —Ç—ñ–ª—å–∫–∏ —â–æ –æ–±—Ä–æ–±–ª—è–≤. –ú–∏ —Ç–∞–∫–æ–∂ –≤—Ç—Ä–∞—Ç–∏–º–æ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—ñ –±—É–ª–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ —Ü—å–æ–º—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–æ–±—ñ—Ç–Ω–∏–∫—É, –∞–ª–µ —â–µ –Ω–µ –±—É–ª–∏ –æ–±—Ä–æ–±–ª–µ–Ω—ñ.

–ê–ª–µ –º–∏ –Ω–µ —Ö–æ—á–µ–º–æ –≤—Ç—Ä–∞—á–∞—Ç–∏ –∂–æ–¥–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å. –Ø–∫—â–æ —Ä–æ–±—ñ—Ç–Ω–∏–∫ –ø–æ–º—Ä–µ, –º–∏ —Ö–æ—Ç—ñ–ª–∏ –±, —â–æ–± –∑–∞–≤–¥–∞–Ω–Ω—è –±—É–ª–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —ñ–Ω—à–æ–º—É —Ä–æ–±—ñ—Ç–Ω–∏–∫—É.

–î–ª—è —Ç–æ–≥–æ, —â–æ–± —É–ø–µ–≤–Ω–∏—Ç–∏—Å—è, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è, RabbitMQ –ø—ñ–¥—Ç—Ä–∏–º—É—î [–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å](https://www.rabbitmq.com/docs/confirms). –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (`ack(nowledgement)`) –∑–≤–æ—Ä–æ—Ç–Ω—å–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —Å–ø–æ–∂–∏–≤–∞—á–µ–º, —â–æ–± –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ RabbitMQ, —â–æ –ø–µ–≤–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–ª–æ –æ—Ç—Ä–∏–º–∞–Ω–æ, –æ–±—Ä–æ–±–ª–µ–Ω–æ —ñ —â–æ RabbitMQ –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –π–æ–≥–æ.

–Ø–∫—â–æ —Å–ø–æ–∂–∏–≤–∞—á –ø–æ–º—Ä–µ (–π–æ–≥–æ –∫–∞–Ω–∞–ª –±—É–¥–µ –∑–∞–∫—Ä–∏—Ç–æ, –∑'—î–¥–Ω–∞–Ω–Ω—è –±—É–¥–µ –∑–∞–∫—Ä–∏—Ç–æ –∞–±–æ TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ) –±–µ–∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (ack), RabbitMQ —Ä–æ–∑—É–º—ñ—Ç–∏–º–µ, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –±—É–ª–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–±—Ä–æ–±–ª–µ–Ω–æ, —ñ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –π–æ–≥–æ —É —á–µ—Ä–≥—É. –Ø–∫—â–æ –≤ —Ü–µ–π –º–æ–º–µ–Ω—Ç —ñ—Å–Ω—É—é—Ç—å —ñ–Ω—à—ñ —Å–ø–æ–∂–∏–≤–∞—á—ñ, –≤—ñ–Ω —à–≤–∏–¥–∫–æ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å –π–æ–≥–æ —ñ–Ω—à–æ–º—É —Å–ø–æ–∂–∏–≤–∞—á—É. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –≤–∏ –º–æ–∂–µ—Ç–µ –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ –∂–æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∏ —á–∞—Å –≤—ñ–¥ —á–∞—Å—É –∑–∞–≥–∏–Ω–∞—é—Ç—å.

–ù–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–ø–æ–∂–∏–≤–∞—á–∞ –Ω–∞–∫–ª–∞–¥–µ–Ω–æ —Ç–∞–π–º–∞—É—Ç (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 30 —Ö–≤–∏–ª–∏–Ω). –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –≤–∏—è–≤–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–æ–≤—ñ (–∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ) —Å–ø–æ–∂–∏–≤–∞—á—ñ, —è–∫—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É. –í–∏ –º–æ–∂–µ—Ç–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ —Ü–µ–π —Ç–∞–π–º–∞—É—Ç, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ [–¢–∞–π–º–∞—É—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–æ—Å—Ç–∞–≤–∫–∏](https://www.rabbitmq.com/docs/consumers#acknowledgement-timeout).

[–†—É—á–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å](https://www.rabbitmq.com/docs/confirms) –≤–≤—ñ–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –£ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –º–∏ —è–≤–Ω–æ –≤–∏–º–∫–Ω—É–ª–∏ –π–æ–≥–æ, –≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä autoAck ("–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–∂–∏–º –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è") –Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è true. –¶–µ —á–∞—Å –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –ø—Ä–∞–ø–æ—Ä–µ—Ü—å —ñ –≤—Ä—É—á–Ω—É –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤—ñ–¥ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞, —è–∫ —Ç—ñ–ª—å–∫–∏ –º–∏ –∑–∞–≤–µ—Ä—à–∏–º–æ –∑–∞–≤–¥–∞–Ω–Ω—è.

–ü—ñ—Å–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ –≤–∏–∫–ª–∏–∫—É ***WriteLine*** –¥–æ–¥–∞–π—Ç–µ –≤–∏–∫–ª–∏–∫ ***BasicAck*** —Ç–∞ –æ–Ω–æ–≤—ñ—Ç—å **BasicConsume** —Ç–∞–∫–∏–º —á–∏–Ω–æ–º ***autoAck:false***:

```cs
    Console.WriteLine(" [x] Done");

    // here channel could also be accessed as ((EventingBasicConsumer)sender).Model
    channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false);
};
channel.BasicConsume(queue: "hello",
                     autoAck: false,
                     consumer: consumer);
```

–ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ü—å–æ–≥–æ –∫–æ–¥—É –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –≤—É–∑–æ–ª —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `CTRL`+`C` –ø—ñ–¥ —á–∞—Å –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –Ω—ñ—á–æ–≥–æ –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ. –ù–µ–∑–∞–±–∞—Ä–æ–º –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—É–∑–ª–∞ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –≤—Å—ñ –Ω–µ–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥—É—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ñ.

–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —Ç–æ–º—É –∂ —Å–∞–º–æ–º—É –∫–∞–Ω–∞–ª—ñ, –Ω–∞ —è–∫–æ–º—É –±—É–ª–æ –æ—Ç—Ä–∏–º–∞–Ω–æ –¥–æ—Å—Ç–∞–≤–∫—É. –°–ø—Ä–æ–±–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ñ–Ω—à–æ–≥–æ –∫–∞–Ω–∞–ª—É –ø—Ä–∏–∑–≤–µ–¥—É—Ç—å –¥–æ –≤–∏–Ω—è—Ç–∫—É –ø—Ä–æ—Ç–æ–∫–æ–ª—É –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–∞–Ω–∞–ª—É. –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–∏–≤. [–¥–æ–≤—ñ–¥–∫–æ–≤–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—å](https://www.rabbitmq.com/docs/confirms).

> **–í—Ç—Ä–∞—á–µ–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è**
>
> –ü—Ä–æ–ø—É—Å–∫ `BasicAck` - —Ü–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞. –¶–µ –ª–µ–≥–∫–∞ –ø–æ–º–∏–ª–∫–∞, –∞–ª–µ –Ω–∞—Å–ª—ñ–¥–∫–∏ —Å–µ—Ä–π–æ–∑–Ω—ñ. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±—É–¥—É—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ñ, –∫–æ–ª–∏ –≤–∞—à –∫–ª—ñ—î–Ω—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–±–æ—Ç—É (—Ü–µ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —è–∫ –≤–∏–ø–∞–¥–∫–æ–≤–µ –ø–æ–≤—Ç–æ—Ä–Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—è), –∞–ª–µ RabbitMQ –±—É–¥–µ –∑'—ó–¥–∞—Ç–∏ –≤—Å–µ –±—ñ–ª—å—à–µ —Ç–∞ –±—ñ–ª—å—à–µ –ø–∞–º'—è—Ç—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –Ω–µ –∑–º–æ–∂–µ –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ –Ω—ñ—è–∫—ñ –Ω–µ–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
>
> –©–æ–± –Ω–∞–ª–∞–≥–æ–¥–∏—Ç–∏ —Ç–∞–∫–∏–π —Ç–∏–ø –ø–æ–º–∏–ª–∫–∏, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `rabbitmqctl` –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–ª—è `messages_unacknowledged`:
> `sudo rabbitmqctl list_queues name messages_ready messages_unacknowledged`
>
> –ù–∞ Windows –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ sudo:
> `rabbitmqctl.bat list_queues name messages_ready messages_unacknowledged`

## –°—Ç—ñ–π–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

–ú–∏ –≤–∏–≤—á–∏–ª–∏, —è–∫ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏, —â–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Å–ø–æ–∂–∏–≤–∞—á –≤–º–∏—Ä–∞—î, –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ. –ê–ª–µ –Ω–∞—à—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤—Å–µ —â–µ –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ, —è–∫—â–æ —Å–µ—Ä–≤–µ—Ä RabbitMQ –∑—É–ø–∏–Ω–∏—Ç—å—Å—è.

–ö–æ–ª–∏ RabbitMQ –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç—É –∞–±–æ –∞–≤–∞—Ä—ñ–π–Ω–æ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è, –≤—ñ–Ω –∑–∞–±—É–¥–µ —á–µ—Ä–≥–∏ —ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—â–æ –≤–∏ –Ω–µ –ø–æ–≤—ñ–¥–æ–º–∏—Ç–µ –π–æ–º—É –ø—Ä–æ —Ü–µ. –©–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ —á–µ—Ä–≥—É, —Ç–∞–∫ —ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫ —Å—Ç—ñ–π–∫—ñ (durable).

–°–ø–æ—á–∞—Ç–∫—É –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —á–µ—Ä–≥–∞ –≤–∏–∂–∏–≤–µ –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –≤—É–∑–ª–∞ RabbitMQ. –î–ª—è —Ü—å–æ–≥–æ –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —ó—ó —è–∫ —Å—Ç—ñ–π–∫—É (***durable***):

```cs
channel.QueueDeclare(queue: "hello",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);
```

–•–æ—á–∞ —Ü—è –∫–æ–º–∞–Ω–¥–∞ –≤ —Ü—ñ–ª–æ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–∞, –≤–æ–Ω–∞ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –≤ –Ω–∞—à—ñ–π –ø–æ—Ç–æ—á–Ω—ñ–π –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ. –¶–µ —Ç–æ–º—É, —â–æ –º–∏ –≤–∂–µ –≤–∏–∑–Ω–∞—á–∏–ª–∏ —á–µ—Ä–≥—É –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `hello`, —è–∫–∞ –Ω–µ —î —Å—Ç—ñ–π–∫–æ—é. RabbitMQ –Ω–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ —ñ—Å–Ω—É—é—á—É —á–µ—Ä–≥—É –∑ —ñ–Ω—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ –ø–æ–º–∏–ª–∫—É –±—É–¥—å-—è–∫—ñ–π –ø—Ä–æ–≥—Ä–∞–º—ñ, —è–∫–∞ –Ω–∞–º–∞–≥–∞—Ç–∏–º–µ—Ç—å—Å—è —Ü–µ –∑—Ä–æ–±–∏—Ç–∏. –ê–ª–µ —î —à–≤–∏–¥–∫–µ –æ–±—Ö–æ–¥—É —Ü—ñ—î—ó –ø—Ä–æ–±–ª–µ–º–∏ - –¥–∞–≤–∞–π—Ç–µ –≤–∏–∑–Ω–∞—á–∏–º–æ —á–µ—Ä–≥—É –∑ —ñ–Ω—à–æ—é –Ω–∞–∑–≤–æ—é, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `task_queue`:

–ó–º—ñ–Ω–∏, –≤–Ω–µ—Å–µ–Ω—ñ –≤ `QueueDeclare`, –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ —è–∫ –¥–æ –∫–æ–¥—É –≤–∏—Ä–æ–±–Ω–∏–∫–∞, —Ç–∞–∫ —ñ –¥–æ —Å–ø–æ–∂–∏–≤–∞—á–∞. –í–∞–º —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞–∑–≤—É —á–µ—Ä–≥–∏ –¥–ª—è `BasicConsume` —Ç–∞ `BasicPublish`.

–ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –º–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —á–µ—Ä–≥–∞ `task_queue` –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–∞ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ RabbitMQ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è. –¢–µ–ø–µ—Ä –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞—à—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫ —Å—Ç—ñ–π–∫—ñ.

–ü—ñ—Å–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ ***GetBytes***, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `IBasicProperties.Persistent` –Ω–∞ `true`:

```cs
var body = Encoding.UTF8.GetBytes(message);

var properties = channel.CreateBasicProperties();
properties.Persistent = true;
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞ —â–æ–¥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å**
> –ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —è–∫ —Å—Ç—ñ–π–∫–∏—Ö –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ–≤–Ω—ñ—Å—Ç—é, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ. –•–æ—á–∞ —Ü–µ –∫–∞–∂–µ RabbitMQ –∑–±–µ—Ä–µ–≥—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –¥–∏—Å–∫, –≤—Å–µ —â–µ —î –∫–æ—Ä–æ—Ç–∫–µ –≤—ñ–∫–Ω–æ —á–∞—Å—É, –∫–æ–ª–∏ RabbitMQ –ø—Ä–∏–π–Ω—è–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∞–ª–µ —â–µ –Ω–µ –∑–±–µ—Ä—ñ–≥ –π–æ–≥–æ. –ö—Ä—ñ–º —Ç–æ–≥–æ, RabbitMQ –Ω–µ –≤–∏–∫–æ–Ω—É—î `fsync(2)` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è - –≤–æ–Ω–æ –º–æ–∂–µ –ø—Ä–æ—Å—Ç–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –≤ –∫–µ—à—ñ —ñ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—è –Ω–∞ –¥–∏—Å–∫. –ì–∞—Ä–∞–Ω—Ç—ñ—ó —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ –Ω–µ —î –º—ñ—Ü–Ω–∏–º–∏, –∞–ª–µ —Ü—å–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –Ω–∞—à–æ—ó –ø—Ä–æ—Å—Ç–æ—ó —á–µ—Ä–≥–∏ –∑–∞–≤–¥–∞–Ω—å. –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ –º—ñ—Ü–Ω—ñ—à–∞ –≥–∞—Ä–∞–Ω—Ç—ñ—è, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ [–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤—ñ–¥ –ø—Ä–æ–¥—é—Å–µ—Ä–∞](https://www.rabbitmq.com/docs/confirms).

## –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞ —Ä–æ–∑—Å–∏–ª–∫–∞

–ú–æ–∂–ª–∏–≤–æ, –≤–∏ –ø–æ–º—ñ—Ç–∏–ª–∏, —â–æ —Ä–æ–∑–ø–æ–¥—ñ–ª –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î —Ç–æ—á–Ω–æ —Ç–∞–∫, —è–∫ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤ —Å–∏—Ç—É–∞—Ü—ñ—ó –∑ –¥–≤–æ–º–∞ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏, –∫–æ–ª–∏ –≤—Å—ñ –Ω–µ–ø–∞—Ä–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∞–∂–∫—ñ, –∞ –ø–∞—Ä–Ω—ñ - –ª–µ–≥–∫—ñ, –æ–¥–∏–Ω —Ä–æ–±—ñ—Ç–Ω–∏–∫ –±—É–¥–µ –ø–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–π–Ω—è—Ç–∏–π, –∞ —ñ–Ω—à–∏–π –º–∞–ª–æ —â–æ –±—É–¥–µ —Ä–æ–±–∏—Ç–∏. –ù—É, RabbitMQ –Ω—ñ—á–æ–≥–æ –ø—Ä–æ —Ü–µ –Ω–µ –∑–Ω–∞—î —ñ –≤—Å–µ —â–µ –±—É–¥–µ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ.

–¶–µ —Ç—Ä–∞–ø–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç–µ, —â–æ RabbitMQ –ø—Ä–æ—Å—Ç–æ —Ä–æ–∑—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∫–æ–ª–∏ –≤–æ–Ω–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ —á–µ—Ä–≥—É. –í—ñ–Ω –Ω–µ –¥–∏–≤–∏—Ç—å—Å—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è —Å–ø–æ–∂–∏–≤–∞—á–∞. –í—ñ–Ω –ø—Ä–æ—Å—Ç–æ —Å–ª—ñ–ø–æ —Ä–æ–∑—Å–∏–ª–∞—î –∫–æ–∂–Ω–µ n-—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ n-–≥–æ —Å–ø–æ–∂–∏–≤–∞—á–∞.

```mermaid
flowchart LR;
    P((P))
    Q[[Queue_name]]
    C1((C‚ÇÅ))
    C2((C‚ÇÇ))

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style Q fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style C1 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px
    style C2 fill:#009E0A, stroke:#A0A0A0,stroke-width:2px

    P-->Q-->|Prefetch=1|C1
    Q-->|Prefetch=1|C2
```

–î–ª—è –∑–º—ñ–Ω–∏ —Ü—å–æ–≥–æ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ `BasicQos` –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `prefetchCount` = `1`. –¶–µ –ø–æ–≤—ñ–¥–æ–º–ª—è—î RabbitMQ –Ω–µ –¥–∞–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç–Ω–∏–∫—É –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –Ü–Ω—à–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –Ω–µ —Ä–æ–∑—Å–∏–ª–∞–π—Ç–µ –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç–Ω–∏–∫—É, –ø–æ–∫–∏ –≤—ñ–Ω –Ω–µ –æ–±—Ä–æ–±–∏—Ç—å —ñ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ø–µ—Ä–µ–¥–Ω—î. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤–æ–Ω–æ –±—É–¥–µ —Ä–æ–∑—Å–∏–ª—è—Ç–∏—Å—è –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–±—ñ—Ç–Ω–∏–∫—É, —è–∫–∏–π —â–µ –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π.

–ü—ñ—Å–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ –≤–∏–∫–ª–∏–∫—É ***QueueDeclare*** –≤ ***Worker.cs*** –¥–æ–¥–∞–π—Ç–µ –≤–∏–∫–ª–∏–∫ `BasicQos`:

```cs
channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

channel.BasicQos(prefetchSize: 0, prefetchCount: 1, global: false);
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞ —â–æ–¥–æ —Ä–æ–∑–º—ñ—Ä—É —á–µ—Ä–≥–∏**
> –Ø–∫—â–æ –≤—Å—ñ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∏ –∑–∞–π–Ω—è—Ç—ñ, –≤–∞—à–∞ —á–µ—Ä–≥–∞ –º–æ–∂–µ –∑–∞–ø–æ–≤–Ω–∏—Ç–∏—Å—è. –í–∞–º —Å–ª—ñ–¥ —Å–ª—ñ–¥–∫—É–≤–∞—Ç–∏ –∑–∞ —Ü–∏–º —ñ, –º–æ–∂–ª–∏–≤–æ, –¥–æ–¥–∞—Ç–∏ —â–µ –¥–µ—è–∫–∏—Ö —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é.

## –ü–æ—î–¥–Ω–∞—î–º–æ –≤—Å–µ —Ä–∞–∑–æ–º

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–≤–∞ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏.

–°–ø–æ—á–∞—Ç–∫—É –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–ø–æ–∂–∏–≤–∞—á–∞ (—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞), —â–æ–± —Ç–æ–ø–æ–ª–æ–≥—ñ—è (–ø–µ—Ä–µ–≤–∞–∂–Ω–æ —á–µ—Ä–≥–∞) –±—É–ª–∞ –Ω–∞ –º—ñ—Å—Ü—ñ. –û—Å—å –π–æ–≥–æ –ø–æ–≤–Ω–∏–π –∫–æ–¥:

```cs
using System.Text;
using RabbitMQ.Client;
using RabbitMQ.Client.Events;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

channel.BasicQos(prefetchSize: 0, prefetchCount: 1, global: false);

Console.WriteLine(" [*] Waiting for messages.");

var consumer = new EventingBasicConsumer(channel);
consumer.Received += (model, ea) =>
{
    byte[] body = ea.Body.ToArray();
    var message = Encoding.UTF8.GetString(body);
    Console.WriteLine($" [x] Received {message}");

    int dots = message.Split('.').Length - 1;
    Thread.Sleep(dots * 1000);

    Console.WriteLine(" [x] Done");

    // here channel could also be accessed as ((EventingBasicConsumer)sender).Model
    channel.BasicAck(deliveryTag: ea.DeliveryTag, multiple: false);
};
channel.BasicConsume(queue: "task_queue",
                     autoAck: false,
                     consumer: consumer);

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();
```

–¢–µ–ø–µ—Ä –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤–∏–¥–∞–≤—Ü—è –∑–∞–≤–¥–∞–Ω—å (NewTask). –û—Å—å –π–æ–≥–æ –∫—ñ–Ω—Ü–µ–≤–∏–π –∫–æ–¥:

```cs
using System.Text;
using RabbitMQ.Client;

var factory = new ConnectionFactory { HostName = "localhost" };
using var connection = factory.CreateConnection();
using var channel = connection.CreateModel();

channel.QueueDeclare(queue: "task_queue",
                     durable: true,
                     exclusive: false,
                     autoDelete: false,
                     arguments: null);

var message = GetMessage(args);
var body = Encoding.UTF8.GetBytes(message);

var properties = channel.CreateBasicProperties();
properties.Persistent = true;

channel.BasicPublish(exchange: string.Empty,
                     routingKey: "task_queue",
                     basicProperties: properties,
                     body: body);
Console.WriteLine($" [x] Sent {message}");

Console.WriteLine(" Press [enter] to exit.");
Console.ReadLine();

static string GetMessage(string[] args)
{
    return ((args.Length > 0) ? string.Join(" ", args) : "Hello World!");
}
```

[(–í–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ NewTask.cs)](https://github.com/rabbitmq/rabbitmq-tutorials/blob/main/dotnet/NewTask/NewTask.cs)

–ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ `BasicQos` –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–≥—É –∑–∞–≤–¥–∞–Ω—å. –û–ø—Ü—ñ—ó —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è–º –≤–∏–∂–∏–≤–∞—Ç–∏ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ RabbitMQ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è.

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –º–µ—Ç–æ–¥–∏ `IModel` —Ç–∞ `IBasicProperties` –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ [–¥–æ–≤—ñ–¥–∫—É –ø–æ API .NET –∫–ª—ñ—î–Ω—Ç–∞ RabbitMQ](https://rabbitmq.github.io/rabbitmq-dotnet-client/api/RabbitMQ.Client.html) –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ.

–¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Ç—Ä–µ—Ç—å–æ–≥–æ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ –ø–æ—Å—ñ–±–Ω–∏–∫–∞ —Ç–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —è–∫ –¥–æ—Å—Ç–∞–≤–∏—Ç–∏ –æ–¥–Ω–µ –π —Ç–µ –∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ–º —Å–ø–æ–∂–∏–≤–∞—á–∞–º.

# –ù–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ RabbitMQ - –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è/–ü—ñ–¥–ø–∏—Å–∫–∞
## –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è/–ü—ñ–¥–ø–∏—Å–∫–∞

> [!NOTE]  
> **–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏**  
>
> –¶–µ–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ RabbitMQ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —ñ –ø—Ä–∞—Ü—é—î –Ω–∞ `localhost` –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –ø–æ—Ä—Ç–æ–º (5672). –£ —Ä–∞–∑—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—à–æ–≥–æ —Ö–æ—Å—Ç—É, –ø–æ—Ä—Ç—É –∞–±–æ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö, –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

```mermaid
flowchart LR;
    P((P))
    X{{X}}
    Q1[[Queue_name]]
    Q2[[Queue_name]]
    

    style P fill:#007ACC, stroke:#A0A0A0,stroke-width:2px
    style X fill:#FF006E, stroke:#A0A0A0,stroke-width:2px
    style Q1 fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    style Q2 fill:#CC4E00, stroke:#A0A0A0,stroke-width:2px
    

    P-->X-->Q1
    X-->Q2
```